passport._define("accConnect.js"/*tpa=http://passport.baidu.com/passApi/js/accConnect.js*/,function(){function e(e){this.modulus=o(e),this.k=w(this.modulus)+1;var i=new s;i.digits[2*this.k]=1,this.mu=x(i,this.modulus),this.bkplus1=new s,this.bkplus1.digits[this.k+1]=1,this.modulo=t,this.multiplyMod=n,this.powMod=r}function t(e){var t=k(e,this.k-1),i=b(t,this.mu),n=k(i,this.k+1),r=S(e,this.k+1),a=b(n,this.modulus),s=S(a,this.k+1),o=v(r,s);o.isNeg&&(o=m(o,this.bkplus1));for(var l=D(o,this.modulus)>=0; l;)o=v(o,this.modulus),l=D(o,this.modulus)>=0;return o}function n(e,t){var i=b(e,t);return this.modulo(i)}function r(e,t){var i=new s;i.digits[0]=1;for(var n=e,r=t;0!=(1&r.digits[0])&&(i=this.multiplyMod(i,n)),r=A(r,1),0!=r.digits[0]||0!=w(r);)n=this.multiplyMod(n,n);return i}function a(e){O=e,B=new Array(O);for(var t=0;t<B.length;t++)B[t]=0;M=new s,H=new s,H.digits[0]=1}function s(e){this.digits="boolean"==typeof e&&1==e?null:B.slice(0),this.isNeg=!1}function o(e){var t=new s(!0);return t.digits=e.digits.slice(0),t.isNeg=e.isNeg,t}function l(e){var t=new s;t.isNeg=0>e,e=Math.abs(e);for(var i=0;e>0;)t.digits[i++]=e&K,e>>=U;return t}function c(e){for(var t="",i=e.length-1;i>-1;--i)t+=e.charAt(i);return t}function u(e,t){var i=new s;i.digits[0]=t;for(var n=T(e,i),r=G[n[1].digits[0]];1==D(n[0],M);)n=T(n[0],i),digit=n[1].digits[0],r+=G[n[1].digits[0]];return(e.isNeg?"-":"")+c(r)}function d(e){var t=15,n="";for(i=0;4>i;++i)n+=X[e&t],e>>>=4;return c(n)}function g(e){for(var t="",i=(w(e),w(e));i>-1;--i)t+=d(e.digits[i]);return t}function p(e){var t,i=48,n=i+9,r=97,a=r+25,s=65,o=90;return t=e>=i&&n>=e?e-i:e>=s&&o>=e?10+e-s:e>=r&&a>=e?10+e-r:0}function f(e){for(var t=0,i=Math.min(e.length,4),n=0;i>n;++n)t<<=4,t|=p(e.charCodeAt(n));return t}function h(e){for(var t=new s,i=e.length,n=i,r=0;n>0;n-=4,++r)t.digits[r]=f(e.substr(Math.max(n-4,0),Math.min(n,4)));return t}function m(e,t){var i;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,i=v(e,t),t.isNeg=!t.isNeg;else{i=new s;for(var n,r=0,a=0;a<e.digits.length;++a)n=e.digits[a]+t.digits[a]+r,i.digits[a]=65535&n,r=Number(n>=q);i.isNeg=e.isNeg}return i}function v(e,t){var i;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,i=m(e,t),t.isNeg=!t.isNeg;else{i=new s;var n,r;r=0;for(var a=0;a<e.digits.length;++a)n=e.digits[a]-t.digits[a]+r,i.digits[a]=65535&n,i.digits[a]<0&&(i.digits[a]+=q),r=0-Number(0>n);if(-1==r){r=0;for(var a=0;a<e.digits.length;++a)n=0-i.digits[a]+r,i.digits[a]=65535&n,i.digits[a]<0&&(i.digits[a]+=q),r=0-Number(0>n);i.isNeg=!e.isNeg}else i.isNeg=e.isNeg}return i}function w(e){for(var t=e.digits.length-1;t>0&&0==e.digits[t];)--t;return t}function y(e){var t,i=w(e),n=e.digits[i],r=(i+1)*V;for(t=r;t>r-V&&0==(32768&n);--t)n<<=1;return t}function b(e,t){for(var i,n,r,a=new s,o=w(e),l=w(t),c=0;l>=c;++c){for(i=0,r=c,j=0;o>=j;++j,++r)n=a.digits[r]+e.digits[j]*t.digits[c]+i,a.digits[r]=n&K,i=n>>>U;a.digits[c+o+1]=i}return a.isNeg=e.isNeg!=t.isNeg,a}function _(e,t){var i,n,r;result=new s,i=w(e),n=0;for(var a=0;i>=a;++a)r=result.digits[a]+e.digits[a]*t+n,result.digits[a]=r&K,n=r>>>U;return result.digits[1+i]=n,result}function I(e,t,i,n,r){for(var a=Math.min(t+r,e.length),s=t,o=n;a>s;++s,++o)i[o]=e[s]}function C(e,t){var i=Math.floor(t/V),n=new s;I(e.digits,0,n.digits,i,n.digits.length-i);for(var r=t%V,a=V-r,o=n.digits.length-1,l=o-1;o>0;--o,--l)n.digits[o]=n.digits[o]<<r&K|(n.digits[l]&Z[r])>>>a;return n.digits[0]=n.digits[o]<<r&K,n.isNeg=e.isNeg,n}function A(e,t){var i=Math.floor(t/V),n=new s;I(e.digits,i,n.digits,0,e.digits.length-i);for(var r=t%V,a=V-r,o=0,l=o+1;o<n.digits.length-1;++o,++l)n.digits[o]=n.digits[o]>>>r|(n.digits[l]&Q[r])<<a;return n.digits[n.digits.length-1]>>>=r,n.isNeg=e.isNeg,n}function E(e,t){var i=new s;return I(e.digits,0,i.digits,t,i.digits.length-t),i}function k(e,t){var i=new s;return I(e.digits,t,i.digits,0,i.digits.length-t),i}function S(e,t){var i=new s;return I(e.digits,0,i.digits,0,t),i}function D(e,t){if(e.isNeg!=t.isNeg)return 1-2*Number(e.isNeg);for(var i=e.digits.length-1;i>=0;--i)if(e.digits[i]!=t.digits[i])return e.isNeg?1-2*Number(e.digits[i]>t.digits[i]):1-2*Number(e.digits[i]<t.digits[i]);return 0}function T(e,t){var i,n,r=y(e),a=y(t),l=t.isNeg;if(a>r)return e.isNeg?(i=o(H),i.isNeg=!t.isNeg,e.isNeg=!1,t.isNeg=!1,n=v(t,e),e.isNeg=!0,t.isNeg=l):(i=new s,n=o(e)),new Array(i,n);i=new s,n=e;for(var c=Math.ceil(a/V)-1,u=0;t.digits[c]<W;)t=C(t,1),++u,++a,c=Math.ceil(a/V)-1;n=C(n,u),r+=u;for(var d=Math.ceil(r/V)-1,g=E(t,d-c);-1!=D(n,g);)++i.digits[d-c],n=v(n,g);for(var p=d;p>c;--p){var f=p>=n.digits.length?0:n.digits[p],h=p-1>=n.digits.length?0:n.digits[p-1],b=p-2>=n.digits.length?0:n.digits[p-2],I=c>=t.digits.length?0:t.digits[c],k=c-1>=t.digits.length?0:t.digits[c-1];i.digits[p-c-1]=f==I?K:Math.floor((f*q+h)/I);for(var S=i.digits[p-c-1]*(I*q+k),T=f*z+(h*q+b);S>T;)--i.digits[p-c-1],S=i.digits[p-c-1]*(I*q|k),T=f*q*q+(h*q+b);g=E(t,p-c-1),n=v(n,_(g,i.digits[p-c-1])),n.isNeg&&(n=m(n,g),--i.digits[p-c-1])}return n=A(n,u),i.isNeg=e.isNeg!=l,e.isNeg&&(i=l?m(i,H):v(i,H),t=A(t,u),n=v(t,n)),0==n.digits[0]&&0==w(n)&&(n.isNeg=!1),new Array(i,n)}function x(e,t){return T(e,t)[0]}function L(t,i,n){this.e=h(t),this.d=h(i),this.m=h(n),this.chunkSize=2*w(this.m),this.radix=16,this.barrett=new e(this.m)}function N(e,t){for(var i=new Array,n=t.length,r=0;n>r;)i[r]=t.charCodeAt(r),r++;for(;i.length%e.chunkSize!=0;)i[r++]=0;var a,o,l,c=i.length,d="";for(r=0;c>r;r+=e.chunkSize){for(l=new s,a=0,o=r;o<r+e.chunkSize;++a)l.digits[a]=i[o++],l.digits[a]+=i[o++]<<8;var p=e.barrett.powMod(l,e.e),f=16==e.radix?g(p):u(p,e.radix);d+=f+" "}return d.substring(0,d.length-1)}var F=F||window.passport||{},P=F.tangramInst||P||window.baidu;!function(e){e.apiDomain={staticDomain:window.location?"http:"==window.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com":"http:"==document.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com"}}(F);var $=null;if("function"!=typeof $)var $=function(){};$._baiduInstName=$._baiduInstName||"bdInst_"+(new Date).getTime();var R=R||P.baiduInstance||window.baiduInstance;window[$._baiduInstName]=window[$._baiduInstName]||R,$.resourcePath="",$.skinName="default",$.version="1.0.0.0",/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",!1,!0),P.form=P.form||{},P.url=P.url||{},P.url.escapeSymbol=P.url.escapeSymbol||function(e){return String(e).replace(/[#%&+=\/\\\ \　\f\r\n\t]/g,function(e){return"%"+(256+e.charCodeAt()).toString(16).substring(1).toUpperCase()})},P.form.json=P.form.json||function(e,t){function i(e,t){var i=g[e];i?(i.push||(g[e]=[i]),g[e].push(t)):g[e]=t}for(var n,r,a,s,o,l,c,u,d=e.elements,t=t||function(e){return e},g={},p=0,f=d.length;f>p;p++)if(n=d[p],a=n.name,!n.disabled&&a)switch(r=n.type,s=P.url.escapeSymbol(n.value),r){case"radio":case"checkbox":n.checked&&i(a,t(s,a));break;case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":i(a,t(s,a));break;case"select-multiple":for(o=n.options,c=o.length,l=0;c>l;l++)u=o[l],u.selected&&i(a,t(u.value,a))}return g},$.Base=function(){P.lang.Class.call(this),this._ids={},this._eid=this.guid+"__"},P.lang.inherits($.Base,P.lang.Class,"http://passport.baidu.com/passApi/js/magic.Base").extend({getElement:function(e){return document.getElementById(this.$getId(e))},getElements:function(){var e={},t=this._ids;for(var i in t)e[i]=this.getElement(i);return e},$getId:function(e){return e=P.lang.isString(e)?e:"",this._ids[e]||(this._ids[e]=this._eid+e)},$mappingDom:function(e,t){return P.lang.isString(t)?this._ids[e]=t:t&&t.nodeType&&(t.id?this._ids[e]=t.id:t.id=this.$getId(e)),this},$hide:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="none",e.style.visibility="hidden"),this},$show:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="block",e.style.visibility="visible",e.style.opacity="1"),this},$dispose:function(){this.fire("ondispose")&&P.lang.Class.prototype.dispose.call(this)}}),$.control=$.control||{},function(){function e(e,t){var n,r=e.getAttribute(t),a=!1;if(r&&(n=r.match(i[0]))){a={};for(var s,o=0;o<n.length;o++)s=n[o].match(i[1]),!isNaN(s[2])&&(s[2]=+s[2]),i[2].test(s[2])&&(s[2]=s[2].replace(i[3],"$2")),i[4].test(s[2])&&(s[2]=i[5].test(s[2])),a[s[1]]=s[2]}return a}function t(t,i){var n=e(t,"tang-event");if(n)for(var r in n){var a=n[r].substr(1);a.indexOf("(")<0&&(a+="()"),P.dom(t).on(r,new Function($._baiduInstName+"('"+i+"') && "+$._baiduInstName+"('"+i+"')"+a))}}$.setup=$.setup||function(i,n,r){var a=e(i,"tang-param")||{};for(var s in r)a[s]=r[s];var o=new n(a);o.$mappingDom("",i),t(i,o.guid);for(var l=i.getElementsByTagName("*"),s=l.length-1;s>=0;s--)t(l[s],o.guid);return o};var i=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i]}();var O,B,M,H,U=16,V=U,q=65536,W=q>>>1,z=q*q,K=q-1;a(20);var G=(l(1e15),new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z")),X=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),Z=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535),Q=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),F=F||window.passport||{};F.err=F.err||{},function(e){var t=null;t="function"===(typeof e.getCurrent).toLowerCase()?e.getCurrent():{errMsg:{},labelText:{}},t.errMsg.accConnect={},t.labelText.accConnect={password:"密码",bindTitle:"您的帐号为(#{username})，请设置新的密码，验证通过后即可升级为百度帐号：",mobileBtnText:"发送手机验证码",emailBtnText:"发送邮箱验证码",vcode:"验证码",bindTip:"注册成功后，您的帐号可用于登录百度所有产品如贴吧、文库、知道、地图等",submitText:"确定",vcodeingText:"发送中...",reSend:"重新发送",userListTitle:"系统检测到您已有百度帐号，可直接将糯米帐号(#{username})升级至以下帐号",nextText:"下一步",userListTip:"升级后可以用百度帐号登录糯米，更安全、更方便",pwdTitle:"为了确保是您本人操作，请验证百度帐号(#{username})后进行升级",pwdAuthText:"使用百度帐号登录",mobileLoginText:"短信快捷登录",emailLoginText:"邮箱验证登录",fgtPwd:"登录遇到问题",bindmobileverifyCode:"手机验证码",bindemailverifyCode:"邮箱验证码",errorTitle:'非常抱歉，系统错误，请您稍后再试，<a href="http://passport.baidu.com/v2/?ucenterfeedback#upgrade_0" target="_blank">帮助中心</a>',smsVerifyCode:"动态密码",emailVerifyCode:"邮箱验证码"},e.getCurrent=function(){return t}}(F.err);var F=F||window.passport||{};return F.data=F.data||{},function(e){function t(e){this._requests=[],this._value=null,this._exception=null,this._isComplete=!1;var t=this;e(function(e){t._fulfillPromise(e)},function(e){t._breakPromise(e)})}function i(e,t,i){return t?i?function(i){return i=i||{},c.submit(u+t,n(i,e,p[e],f[e],!0),{charset:"utf-8",processData:function(t){if(t)for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n&&(t[i]=decodeURIComponent(n))}return r(e,t)}})}:function(i){return c.jsonp(u+t,n(i,e,p[e],f[e],!1),{charset:"utf-8",processData:function(t){return r(e,t)}})}:o}function n(e,t,i,n,r){var a=r?{staticpage:b.staticPage,charset:b.charset||document.characterSet||document.charset||""}:{},s=h[t];if(s)for(var o in s){if(s.hasOwnProperty(o)){var c=s[o];a[o]="function"==typeof c?c(e):c}"verifypass"==o&&(a[o]=decodeURIComponent(a[o]))}if(a.token=b.token,a.tpl=b.product||"",a.subpro=b.subpro,a.apiver="v3",a.tt=(new Date).getTime(),e){i=i||{},n=n||{};for(var o in e)if(e.hasOwnProperty(o)){var u=n[o],d=u?u(e[o],e):e[o];"string"==typeof d&&(r&&(d=decodeURIComponent(d)),m[o]||(d=l.trim(d))),a[i[o]||o.toLowerCase()]=d}}return a}function r(t,i){if(e&&e.traceID&&e.traceID.getTraceID&&e.traceID.getTraceID(i),i){var n=v[t];n&&n(i);var r=i.errInfo,s=i,o=s;return r?s.errInfo=a(t,r,s):(r={no:i.err_no,msg:i.err_msg||""},delete s.err_no,delete s.err_msg,o={data:s,errInfo:a(t,r,s)}),o}return i}function a(e,t){var i=y[w[e]||e];if(i&&t&&0!=t.no){var n=i[t.no]||i[-1];if(n){var r=n.msg;t.msg=r,t.field=n.field}}return t}function s(t){if(e&&e.traceID&&e.traceID.getTraceID&&e.traceID.getTraceID(t),t){var i=t.errInfo,n=t;if(!i)for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];a&&(t[r]=decodeURIComponent(a))}i||(i={no:t.err_no,msg:t.err_msg||""},delete n.err_no,delete n.err_msg,t={data:n,errInfo:i})}return t}var o=function(){};t.prototype={get_isComplete:function(){return this._isComplete},get_value:function(){if(!this._isComplete)return void 0;if(this._exception)throw this._exception;return this._value},call:function(e){for(var t=[],i=0,n=arguments.length-1;n>i;i++)t[i]=arguments[i+1];return this.when(function(i){return i[e].apply(i,t)})},getValue:function(e){return this.when(function(t){return t[e]})},setValue:function(e,t){this.whenOnly(function(i){i[e]=t})},when:function(e,i,n){return t.when(this,e,i,n)},whenOnly:function(e,i,n){t.whenOnly(this,e,i,n)},success:function(e,t){return this.when(e,o,t)},fail:function(e,t){return this.when(o,e,t)},_enqueueOne:function(e){this._isComplete?this._notify(e):this._requests.push(e)},_notify:function(e){this._exception?e.breakPromise&&e.breakPromise(this._exception):e.fulfillPromise&&e.fulfillPromise(this._value)},_notifyAll:function(){for(var e=0,t=this._requests.length;t>e;e++)this._notify(this._requests[e])},_fulfillPromise:function(e){this._value=e,this._exception=null,this._isComplete=!0,this._notifyAll()},_breakPromise:function(e){this._value=null,this._exception=e||new Error("An error occured"),this._isComplete=!0,this._notifyAll()}},t.when=function(e,i,n,r){return new t(function(a,s){t.make(e)._enqueueOne({fulfillPromise:function(e){a(i?i.call(r,e):e)},breakPromise:function(e){if(n)try{a(n.call(r,e))}catch(t){s(t)}else s(e)}})})},t.whenOnly=function(e,i,n,r){t.make(e)._enqueueOne({fulfillPromise:function(e){i&&i.call(r,e)},breakPromise:function(e){n&&n.call(r,e)}})},t.make=function(e){return e instanceof t?e:t.immediate(e)},t.immediate=function(e){return new t(function(t){t(e)})};var l={};!function(e){var t=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");e.trim=function(e){return String(e).replace(t,"")},e.getUniqueId=function(e){return e+Math.floor(2147483648*Math.random()).toString(36)},e.g=function(e){return e?"string"==typeof e||e instanceof String?document.getElementById(e):!e.nodeName||1!=e.nodeType&&9!=e.nodeType?null:e:null},e.getParent=function(t){return t=e.g(t),t.parentElement||t.parentNode||null},e.encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e.array=e.array||{},e.array.indexOf=function(e,t,i){var n=e.length;for(i=0|i,0>i&&(i=Math.max(0,n+i));n>i;i++)if(i in e&&e[i]===t)return i;return-1},e.browser=e.browser||{},e.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,e.insertHTML=function(t,i,n){t=e.g(t);var r,a;return t.insertAdjacentHTML&&!e.browser.opera?t.insertAdjacentHTML(i,n):(r=t.ownerDocument.createRange(),i=i.toUpperCase(),"AFTERBEGIN"==i||"BEFOREEND"==i?(r.selectNodeContents(t),r.collapse("AFTERBEGIN"==i)):(a="BEFOREBEGIN"==i,r[a?"setStartBefore":"setEndAfter"](t),r.collapse(a)),r.insertNode(r.createContextualFragment(n))),t}}(l),e.base=l;var c={};!function(i){var n="__bdpp_pstc__"+(new Date).getTime(),r=n+"_form",a=n+"_ifr",s=function(e){if("object"==typeof e){var t=[];for(var i in e){var n=e[i];if(void 0!==n&&null!==n){t.length&&t.push("&");var r=encodeURIComponent("boolean"==typeof n?n?"1":"0":n.toString());t.push(encodeURIComponent(i),"=",r)}}return t.join("")}return"string"==typeof e?e:null},o=function(e,t){if(t=s(t),"string"==typeof t){var i=/\?/g.test(e);e+=(i?"&":"?")+s(t)}return e},c=function(e,t,i){e.setAttribute("type","text/javascript"),i&&e.setAttribute("charset",i),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)},u=function(e){if(e.clearAttributes)e.clearAttributes();else for(var t in e)e.hasOwnProperty(t)&&delete e[t];e&&e.parentNode&&e.parentNode.removeChild(e),e=null},d=function(e,t,i){function n(e){return function(){try{e?d.onfailure&&d.onfailure():(t.apply(window,arguments),clearTimeout(a)),window[r]=null,delete window[r]}catch(i){}finally{u(s)}}}var r,a,s=document.createElement("SCRIPT"),o="bd__cbs__",d=i||{},g=d.charset,p=d.queryField||"callback",f=d.timeOut||0,h=new RegExp("(\\?|&)"+p+"=([^&]*)");r=l.getUniqueId(o),window[r]=n(0),f&&(a=setTimeout(n(1),f)),e=e.replace(h,"$1"+p+"="+r),e.search(h)<0&&(e+=(e.indexOf("?")<0?"?":"&")+p+"="+r),c(s,e,g)},g=function(e,t){var i=[];i.push("<form id='",r,"' target='",a,"' "),i.push("action='",l.encodeHTML(e),"' method='post'>");for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];if(void 0!==s&&null!==s){var o=l.encodeHTML("boolean"==typeof s?s?"1":"0":s);i.push("<input type='hidden' name='",l.encodeHTML(n),"' value='",o,"' />")}}return i.push("</form>"),i.join("")},p=function(e,t,i,s){function o(e){return function(){try{e?s.onfailure&&s.onfailure():(i.apply(window,arguments),u&&clearTimeout(u)),window[d]=null,delete window[d]}catch(t){}}}s=s||{};var c=s.timeOut||0,u=!1,d=l.getUniqueId("bd__pcbs__");t[s.queryField||"callback"]="parent."+d;var p=g(e,t);if(l.g(r))l.getParent(r).innerHTML=p;else{var f=[];f.push("<div id='",n,"' style='display:none;'>"),f.push("<div>",p,"</div>"),f.push("<iframe name='",a,"' src='"+("https:"==(window.location?window.location.protocol.toLowerCase():document.location.protocol.toLowerCase())?"https://passport.baidu.com/passApi/html/_blank.html":"about:blank")+"' style='display:none;'></iframe>"),f.push("</div>"),l.insertHTML(document.body,"beforeEnd",f.join(""))}window[d]=o(),c&&(u=setTimeout(o(1),c)),l.g(r).submit()};i.jsonp=function(i,n,r){return r=r||{},e&&e.traceID&&e.traceID.createTraceID&&(n.traceid=e.traceID.createTraceID()),new t(function(e,t){i=o(i,n),d(i,function(t){r.processData&&(t=r.processData(t)),e&&e(t)},{charset:r.charset,queryField:r.queryField,timeOut:r.timeOut,onfailure:function(){t&&t()}})})},i.submit=function(i,n,r){return e&&e.traceID&&e.traceID.createTraceID&&(n.traceid=e.traceID.createTraceID()),i&&n?new t(function(e){p(i,n,function(t){r.processData&&(t=r.processData(t)),e&&e(t)},r)}):void 0};var f=[];i.load=function(e){return new t(function(t){var i=f.push(new Image)-1,n=!1,r=setTimeout(function(){n=!0,t&&t()},1e3);f[i].onload=function(){clearTimeout(r),n||t&&t(),n=!0,f[i]=f[i].onload=null},f[i].src=e})}}(c);var u="https://passport.baidu.com",d={getApiInfo:"/v2/api/?getapi",getLoginHistory:"/v2/api/?loginhistory",loginCheck:"/v2/api/?logincheck",getVerifyCodeStr:"/v2/?reggetcodestr",getRegSmsVerifyCodeStr:"/v2/?regsmscodestr",checkUserName:"/v2/?regnamesugg",checkPassword:"/v2/?regpwdcheck",checkMail:"/v2/?regmailcheck",isUserNoName:"/v2/api/?ucenteradduname",checkPhone:"/v2/?regphonecheck",getphonestatus:"/v2/?getphonestatus",sendPhoneCode:"/v2/?regphonesend",multiBind:"/v2/?multiaccountassociate",multiUnbind:"/v2/?multiaccountdisassociate",multiCheckUserName:"/v2/?multiaccountusername",multiGetaccounts:"/v2/?multiaccountget",multiSwitchuser:"/v2/?loginswitch",checkVerifycode:"/v2/?checkvcode",getRsaKey:"/v2/getpublickey",authwidGetverify:"/v2/sapi/authwidgetverify",checkIDcard:"/v3/finance/main/idnumcert",checkIDcardSecondStep:"/v3/finance/main/upcert",checkIDcardAllStep:"/v3/finance/main/idnumcert",checkIDcardState:"/v3/finance/main/checkupcert"},g={login:"/v2/api/?login",reg:"/v2/api/?reg",fillUserName:"/v2/api/?ucenteradduname",regPhone:"/v2/api/?regphone",checkIDcard:"/v3/finance/main/idnumcert",checkIDcardSecondStep:"/v3/finance/main/upcert",checkIDcardAllStep:"/v3/finance/main/idnumcert"},p={getApiInfo:{apiType:"class"},login:{memberPass:"mem_pass",safeFlag:"safeflg",isPhone:"isPhone",timeSpan:"ppui_logintime",logLoginType:"logLoginType"},fillUserName:{selectedSuggestName:"pass_fillinusername_suggestuserradio",timeSpan:"ppui_fillusernametime"},reg:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"},regPhone:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"}},f={loginCheck:{isPhone:function(e){return e?"true":"false"}},login:{memberPass:function(e){return e?"on":""}}},h={checkPassword:{fromreg:1},reg:{registerType:1,verifypass:function(e){return e.password}}},m={password:!0},v={login:function(){}},w={checkUserName:"reg",checkMail:"reg",checkPhone:"regPhone",sendPhoneCode:"regPhone",multiCheckUserName:"multiBind",multiSwitchuser:"changeUser",checkVerifycode:"checkVerifycode"},y=F.err.getCurrent().errMsg||F.err.getCurrent(),b={};e.setContext=function(e){b.product=e.product||b.product,b.charset=e.charset||b.charset,b.staticPage=e.staticPage||b.staticPage,b.token=e.token||b.token,b.subpro=e.subpro||b.subpro},e.traceID={headID:e.traceID&&e.traceID.headID||"",flowID:e.traceID&&e.traceID.flowID||"",cases:e.traceID&&e.traceID.cases||"",initTraceID:function(e){var t=this;e&&e.length>0?(t.headID=e.slice(0,6),t.flowID=e.slice(6,8)):t.destory()},createTraceID:function(){var e=this;return e.headID+e.flowID+e.cases},startFlow:function(e){var t=this,i=t.getFlowID(e);0===t.flowID.length||t.flowID===i?(t.createHeadID(),t.flowID=i):t.finishFlow(i)},finishFlow:function(){var e=this;e.destory()},getRandom:function(){return parseInt(90*Math.random()+10,10)},createHeadID:function(){var e=this,t=(new Date).getTime()+e.getRandom().toString(),i=Number(t).toString(16),n=i.length,r=i.slice(n-6,n).toUpperCase();e.headID=r},getTraceID:function(e){var t=this,i=e&&e.traceid||"";t.initTraceID(i)},getFlowID:function(e){var t={login:"01",reg:"02"};return t[e]},setData:function(e){var t=this;return e.data?e.data.traceid=t.createTraceID():e.url=e.url+(e.url.indexOf("?")>-1?"&":"?")+"traceid="+t.createTraceID(),e},destory:function(){var e=this;e.headID="",e.flowID=""}};for(var _ in d)d.hasOwnProperty(_)&&(e[_]=i(_,d[_]));for(var _ in g)g.hasOwnProperty(_)&&(e[_]=i(_,g[_],!0));e.jsonp=function(e,t){return 0!=e.indexOf("http")&&(e=u+e),t=t||{},t.flag_code&&1==t.flag_code||(t.apiver="v3"),t.tt=(new Date).getTime(),c.jsonp(e,t,{charset:"utf-8",processData:function(e){return s(e)}})},e.post=function(e,t){return t=t||{},"wap"!==t.apitype&&(e=u+e),t.staticpage=t.staticpage||b.staticPage,t.charset=t.charset||b.charset||document.characterSet||document.charset||"",t.token=t.token||b.token,t.tpl=t.tpl||b.product,c.submit(e,t,{charset:"utf-8",processData:function(e){return s(e)}})},e.request=c}(F.data),$.passport=P.lang.createClass(function(){this._validateInfo={}},{type:"magic.passport",superClass:$.Base}).extend({_getRegularField:function(e){var t=e.pwd?"password":"text",i=this,n='autocomplete="off"',r=e.maxLength?'maxlength="'+e.maxLength+'"':"",a=e.tip?e.tip:"",s=e.value?e.value:"",o=e.field+""=="verifycode"?"none":"",l="";l="text"===t?'<input type="text" style="display:none;">':'<input type="password" style="display: none;">';var c='<p id="'+i.$getId(e.field+"Wrapper")+'" class="pass-form-item pass-form-item-'+e.field+'" style="display:'+o+'">'+(e.label?'<label for="'+i.$getId(e.field)+'" id="'+i.$getId(e.field+"Label")+'" class="pass-label pass-label-'+e.field+'">'+e.label+"</label>":"")+l+'<input id="'+i.$getId(e.field)+'" type="'+t+'" name="'+e.field+'" class="pass-text-input pass-text-input-'+e.field+'" '+r+(e.placeholder?'placeholder="'+e.placeholder+'" ':"")+n+(e.disabled?'" disabled':"")+' value="'+s+'"/>'+(e.noError?"":'<span id="'+i.$getId(e.field+"Error")+'" class="pass-item-error pass-item-error-'+e.field+'"></span>')+(e.hasSucc?'<span id="'+i.$getId(e.field+"Succ")+'" class="pass-item-succ pass-item-succ-'+e.field+'" style="display:none;"></span>':"")+'<span id="'+i.$getId(e.field+"Tip")+'" class="pass-item-tip pass-item-tip-'+e.field+'" style="display:none"><span id="'+i.$getId(e.field+"TipText")+'" class="pass-item-tiptext pass-item-tiptext-'+e.field+'">'+a+"</span></span></p>";return c},_getHiddenField:function(e,t){var i,n=this,r='<p id="'+n.$getId(t||"hiddenFields")+'" style="display:none">';for(var a in e)e.hasOwnProperty(a)&&(i="string"==typeof e[a]?e[a].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#39;"):e[a],r+='<input type="hidden" id="'+n.$getId((t?t+"_":"")+a)+'" name="'+a+'" value="'+i+'" />');return r+="</p>"},_setEvent:function(){var e=this,t=this.getElement(),i=function(t){e._eventHandler.entrance.apply(e,[t])};P(e.getElement()).on("resize",function(){var e=(navigator.userAgent,!navigator.userAgent.match(/OS [1-8]_\d[_\d]* like Mac OS X/i)),t=!!navigator.userAgent.toString().match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=navigator.userAgent.toString().indexOf("iPad");if(e&&t&&null!=i){var n=document.getElementsByClassName("popBox");null!=n&&n.length>0&&(n[0].style.height=window.screen.height>document.body.clientHeight?window.screen.height*(window.screen.height/document.body.clientHeight)+120+"px":window.screen.height*(window.screen.height/document.body.clientHeight))}}),P(e.getElement("form")).on("submit",i),P(e.getElement("license")).on("click",i),P(e.getElement("verifyCodeChange")).on("click",i),P(e.getElement("verifyCodeSend")).on("click",i),P(e.getElement("smsVcodeSend")).on("click",i),P(t).delegate(".pass-suggest-item label","click",i),P(".pass-text-input",e.getElement()).on({focus:i,blur:i,change:i,keyup:i,mouseover:i,mouseout:i})},_validator:{confStorage:{},builtInMsg:{required:"请您输入%s",phone:"手机号码格式不正确",email:"邮箱格式不正确",idcard:"身份证格式不正确"},builtInRules:{required:/\S+/,phone:/^1[3456789]\d{9}$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,idcard:/(^\d{15}$)|(^\d{17}(\d|X|x)$)/},init:function(e,t){this.confStorage[e.$getId()]=t},validate:function(e,t,i,n){var r=e.getElement(t),a={field:t},s=/^\s*(.+?)\s*$/;if(!r||0===+r.offsetHeight)return!1;for(var o=r.value.replace(s,"$1"),l=this.confStorage[e.$getId()][t],c=l.rules,u=0,d=c.length;d>u;u++){var g,p=c[u],f=this.builtInRules[p];if(g="[object function]"===Object.prototype.toString.call(f).toLowerCase()?f.call(e,r,n):new RegExp(f).test(o),!g)return a.error=!0,e._validateInfo[t]=0,a.msg=this.builtInMsg[p].replace(/\%s/,l.desc),e._validateError(a),void i.error(a)}l.asyncRule?l.asyncRule.call(e,{success:function(n){a.error=!1,a.data=n.data,e._validateInfo[t]=1,e._validateSuccess(a),i.success(a)},error:function(n){a.error=!0,e._validateInfo[t]=0,a.msg=n.msg,e._validateError(a),i.error(a)}},n):(a.error=!1,e._validateInfo[t]=1,e._validateSuccess(a),i.success(a))},validateAll:function(e,t,i){function n(){o=!0,s?t&&t.error(l):t&&t.success(l)}var r=this.confStorage[e.$getId()],a=0,s=!1,o=!1,l=[],c=this._getActiveValidate(e,!0);for(var u in r){if(o)break;this.validate(e,u,{success:function(e){a++,l.push(e),a===c&&n()},error:function(e){return s=!0,a++,l.push(e),i?void n():void(a===c&&n())}},"all")}},_getActiveValidate:function(e,t){var i=this.confStorage[e.$getId()],n=[];for(var r in i){var a=e.getElement(r);a&&0!==a.offsetHeight&&n.push(a)}return t?n.length:n},addRule:function(e,t){var i={};i[e]=t,P.extend(this.builtInRules,i)},addMsg:function(e,t){var i={};i[e]=t,P.extend(this.builtInMsg,i)}},validate:function(e,t){var i=this,n=i.fireEvent("beforeValidate",{validate:{field:e,ele:P(i.getElement(e))}});n&&i._validator.validate(i,e,{success:function(e){var n=i.fireEvent("validateSuccess",{validate:e});n&&t&&t.success&&t.success(e)},error:function(e){var n=i.fireEvent("validateError",{validate:e});n&&t&&t.error&&t.error(e)}})},validateAll:function(e,t){var i=this;t="boolean"==typeof e?e:t?t:!1;var n=i.fireEvent("beforeValidateAll");n&&i._validator.validateAll(i,{success:function(t){var n=i.fireEvent("validateAllSuccess",{validates:t});n&&e&&e.success&&e.success(t)},error:function(t){var n=i.fireEvent("validateAllError",{validates:t});n&&e&&e.error&&e.error(t)}},t)},getValidateStatus:function(e){return this._validateInfo.hasOwnProperty(e)?this._validateInfo[e]:-1},setValidateSuccess:function(e){var t=this;t._validateInfo[e]=1,t._validateSuccess({field:e})},setValidateError:function(e,t,i){var n=this;n._validateInfo[e]=0,n._validateError({field:e,msg:t},i)},setGeneralError:function(e){this.getElement("error").innerHTML=e},clearGeneralError:function(){this.getElement("error").innerHTML=""},_isSupportPlaceholder:function(){return"placeholder"in document.createElement("input")},_getPlaceholder:function(e){for(var t=this,i={},n="",r={},a=0;a<e.length;a++)n=t.lang[e[a].placeholder],0!==+e[a].clearbtn&&(r[a]=P('<span id="'+t.$getId(e[a].label+"_clearbtn")+'" class="pass-clearbtn pass-clearbtn-'+e[a].label+'" style="display:none;"></span>'http://passport.baidu.com/passApi/js/),P(t.getElement(e[a].label)).after(r[a])),t._isSupportPlaceholder()&&!P.browser.ie?P(t.getElement(e[a].label)).attr({placeholder:n}):(i[a]=P('<span id="'+t.$getId(e[a].label+"_placeholder")+'" class="pass-placeholder pass-placeholder-'+e[a].label+'">'+n+"</span>"),P(t.getElement(e[a].label)).after(i[a])),t._rendEventPlaceholder(t.getElement(e[a].label),i[a],r[a])},_getCookie:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?unescape(t[2]):null},_logPass:function(e,t){function i(e){var t,i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=e.length,i=0,t="";n>i;){if(r=255&e.charCodeAt(i++),i===n){t+=o.charAt(r>>2),t+=o.charAt((3&r)<<4),t+="==";break}if(a=e.charCodeAt(i++),i===n){t+=o.charAt(r>>2),t+=o.charAt((3&r)<<4|(240&a)>>4),t+=o.charAt((15&a)<<2),t+="=";break}s=e.charCodeAt(i++),t+=o.charAt(r>>2),t+=o.charAt((3&r)<<4|(240&a)>>4),t+=o.charAt((15&a)<<2|(192&s)>>6),t+=o.charAt(63&s)}return t}var n=document.location.protocol+"//nsclick.baidu.com/v.gif?pid=111&v="+(new Date).getTime(),r="";for(var a in t)r=r+a+":"+t[a]+",";r=i("{"+r.substring(0,r.length-1)+"}");for(var s in e)e.hasOwnProperty(s)&&(n+="&"+s+"="+e[s]);if(n+="&source=pc",n+="&auto_statistic="+r+"&auto_en="+t.eventType){var o=new Image;o.onload=o.onerror=function(){o.onload=o.onerror=null,o=null},o.src=n}},logClickLink:function(e,t){e=e||{},e=this.formatLogData(e);var i=t.target||t.srcElement,n=i&&i.getAttribute&&i.getAttribute("target"),r="_self"===n||null===n,a=this.makeImgSrc(e);if(r&&(t.preventDefault?t.preventDefault():t.returnValue=!1),window.navigator.sendBeacon&&r)window.navigator.sendBeacon(a),window.location.href=i.getAttribute("href");else if(r)this.lazyLog(i,a,null);else{var s=new Image;s.onload=s.onerror=function(){s.onload=s.onerror=null,s=null},s.src=a}},logCallBack:function(e,t){e=e||{},e=this.formatLogData(e);var i=this.makeImgSrc(e);this.lazyLog({},i,t)},formatLogData:function(e){var t=this.config||{};return P.extend({},{page:e.logPage||"",source:"pc-api",tpl:t.product||"",subpro:t.subpro||"",extrajson:t.extrajson||"",data_source:"fe"},e)},makeImgSrc:function(e){var t=document.location.protocol+"//nsclick.baidu.com/v.gif?pid=111&type=1023&v="+(new Date).getTime(),i="";for(var n in e)e.hasOwnProperty(n)&&(i+="en"!==n?"&"+n+"="+e[n]:"&auto_en="+e[n]);var r="{eventType:"+(e.en||"")+"}";return r=this.base64encode(r),t+="&auto_statistic="+r,t+="&auto_en="+(e.en||""),t+=i},lazyLog:function(e,t,i){function n(){i?i():window.location.href=r}var r=e.getAttribute&&e.getAttribute("href"),a=new Image,s=setTimeout(function(){a.onload=a.onerror=a=null,n("imgTimeout")},200);a.onload=a.onerror=function(){clearTimeout(s),a.onload=a.onerror=a=null,n("imgSuccess")},a.src=t},base64encode:function(e){var t,i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=e.length,i=0,t="";n>i;){if(r=255&e.charCodeAt(i++),i===n){t+=o.charAt(r>>2),t+=o.charAt((3&r)<<4),t+="==";break}if(a=e.charCodeAt(i++),i===n){t+=o.charAt(r>>2),t+=o.charAt((3&r)<<4|(240&a)>>4),t+=o.charAt((15&a)<<2),t+="=";break}s=e.charCodeAt(i++),t+=o.charAt(r>>2),t+=o.charAt((3&r)<<4|(240&a)>>4),t+=o.charAt((15&a)<<2|(192&s)>>6),t+=o.charAt(63&s)}return t},_rendEventPlaceholder:function(e,t,i){if(e||i){var n,r,a=this,s=function(e){1===+e?(t&&t[0]&&a.$hide(t[0]),i&&i[0]&&a.$show(i[0])):(t&&t[0]&&a.$show(t[0]),i&&i[0]&&a.$hide(i[0]))};setTimeout(function(){e&&e.value&&s(1)},200),P(t).on("mousedown",function(){r=!0,clearTimeout(n),n=setTimeout(function(){a.suggestionDom&&"none"!==a.suggestionDom.style.display||e.focus()
},0)}),P(i).on("click",function(){e.value="",s(0),e.focus(),a.suggestionDom&&(a.suggestionDom.data_delete=!0,setTimeout(function(){a.suggestionDom.data_delete=!1},200))}),P(e).on("keyup",function(){s(e.value?1:0)}),P(e).on("focus",function(){window.inputCheckTimer=setInterval(function(){e.value.length?(s(1),clearInterval(window.inputCheckTimer)):s(0)},30)})}},SBCtoDBC:function(e){var t="";if(e){for(var i=e.length,n=0;i>n;n++){var r=e.charCodeAt(n);r=r>=65281&&65374>=r?r-65248:r,r=12288==r?32:r,t+=String.fromCharCode(r)}return t}},hide:function(){this.getElement().style.display="none"},show:function(){this.getElement().style.display="block"},_analysis:function(e,t){return window.passport.analysis&&window.passport.analysis[this.module]&&window.passport.analysis[this.module][e]?(window.passport.analysis[this.module][e](this,t),{preventDefault:!1,preventEvent:!1}):void 0},_hook:function(e,t){return window.passport.hook&&window.passport.hook[this.module]&&window.passport.hook[this.module][e]?window.passport.hook[this.module][e](this,t):{preventDefault:!1,preventEvent:!1}},fireEvent:function(e,t){var i=this._hook(e,t),n=!0;return i.preventEvent||(n=this.fire(e,t)),!i.preventDefault&&n},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):""}}),$.passport.accConnect=P.lang.createClass(function(e){var t=this;t.action="",t._domain={https:"https://passport.baidu.com",http:"http://passport.baidu.com/",auto:"https:"==document.location.protocol.toLowerCase()?"https://passport.baidu.com":"http://passport.baidu.com/"},t.config={product:"",charset:"",token:"",staticPage:"",u:"",lang:"zh-CN"},t.logHistory={},P.extend(t.config,e),t.config.product=t.config.product||"isnull",this.module="accConnect",t.rsa="B3C61EBBA4659C4CE3639287EE871F1F48F7930EA977991C7AFE3CC442FEA49643212E7D570C853F368065CC57A2014666DA8AE7D493FD47D171C0D894EEE3ED7F99F6798B7FFD7B5873227038AD23E3197631A8CB642213B9F27D4901AB0D92BFA27542AE890855396ED92775255C977F5C302F1E7ED4B1E369C12CB6B1822F",t.constant={CHECKVERIFYCODE:!0,CONTAINER_CLASS:"tang-pass-accConnect",LABEL_FOCUS_CLASS:"pass-text-label-focus",FOCUS_CLASS:"pass-text-input-focus",HOVER_CLASS:"pass-text-input-hover",ERROR_CLASS:"pass-text-input-error",CHECK_CLASS:"pass-user-list-check",BLANK_IMG_URL:F.apiDomain.staticDomain+"/passApi/img/small_blank.gif",GET_PASSWORD_URL:t._domain.https+"/?getpassindex&tpl="+encodeURIComponent(t.config.product)+"&u="+encodeURIComponent(t.config.u)},t.lang=F.err.getCurrent().labelText.accConnect},{type:"magic.passport.accConnect",superClass:$.passport}).extend({_getIrregularField:function(e){var t=this,i={connectAd:function(e){if(!e)return"";var t='<p class="pass-adhtmlWrapper">'+e.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</p>";return t},title:function(e,i){var n='<p id="'+t.$getId(e+"title")+'" class="pass-titleWrapper">'+i+"</p>";return n},generalError:function(e){var i='<p id="'+t.$getId(e+"errorWrapper")+'" class="pass-generalErrorWrapper"><span id="'+t.$getId("error")+'" class="pass-generalError pass-generalError-error"></span></p>';return i},verifyCode:function(e,i){var n='<p id="'+t.$getId(e+"verifyCodeWrapper")+'" class="pass-form-item pass-form-item-verifyCode"><input id="'+t.$getId("verifyCode")+'" type="text" name="verifyCode" class="pass-text-input pass-text-input-verifyCode" /><input id="'+t.$getId(e+"timer")+'" class="pass-item-timer" type="button" value="'+i+'"/></p>';return n},userList:function(e,i){var n='<li class="pass-user-list-item '+(i.checked?t.constant.CHECK_CLASS:"")+'" data-index='+i.i+"><div><p>"+i.username+"</p><p>"+i.secureAccount+"</p>";return n},submit:function(e,i){var n='<p id="'+t.$getId(e+"submitWrapper")+'" class="pass-form-item pass-form-item-submit"><input id="'+t.$getId(e+"submit")+'" type="submit" value="'+i+'" class="pass-button pass-button-submit" /></p>';return n},Links:function(e,i){var n='<p id="'+t.$getId(e+"linkWrapper")+'" class="clearfix">';return 1==t.initDataStatus.pwdAuth&&"pwd"!=i.type&&(n+="mobileAuth"==e||"emailAuth"==e?'<a class="pass-link-login" id="'+t.$getId("pwdAuth")+'" target="_blank" >'+t.lang.pwdAuthText+"</a>":'<a class="pass-link-login" id="'+t.$getId("secureLogin")+'" target="_blank" >'+t.lang[(i.type||"mobile")+"LoginText"]+"</a>"),n+='<a class="pass-link-fgtpwd" href="'+t.constant.GET_PASSWORD_URL+'" target="_blank">'+t.lang.fgtPwd+"</a>",n+="</p>"}};return i[e]},_getTemplate:function(e,t){var i=this,n=t&&t.userList||i.initDataStatus&&i.initDataStatus.userList||[],r={bind:function(){var n="<div id="+i.$getId(e+"Wrapper")+' class="tang-pass-wrapper">',r={tpl:i.config.product||i.config.tpl,staticpage:i.config.staticPage,u:i.config.u,token:i.config.token,type:i.initDataStatus.bindType||"mobile"},a=[{field:"password",pwd:!0,label:i.lang.password,noError:!0}];n+=i.config.adtext?i._getIrregularField("connectAd")(i.config.adtext):"",n+=i._getIrregularField("title")(e,i.lang.bindTitle).replace("#{username}",t.displayusername),n+='<form id="'+i.$getId(e+"form")+'" class="pass-form" method="POST" autocomplete="off">',n+=i._getIrregularField("generalError")(e),n+=i._getHiddenField(r);for(var s=0;s<a.length;s++)n+=i._getRegularField(a[s]);return n+=i._getIrregularField("verifyCode")(e,"mobile"==i.initDataStatus.bindType?i.lang.mobileBtnText:i.lang.emailBtnText),n+='<p class="pass-form-item pass-tip">'+i.lang.bindTip+"</p>",n+=i._getIrregularField("submit")(e,i.lang.submitText),n+="</form>",n+="</div>"},pwdAuth:function(){var n="<div id="+i.$getId(e+"Wrapper")+' class="tang-pass-wrapper">',r={staticpage:i.config.staticPage,u:i.config.u,token:i.config.token,tpl:i.config.product||i.config.tpl,isdynamic:0,type:t.type||"mobile"},a=[{field:"password",pwd:!0,label:i.lang.password,noError:!0}];n+=i.config.adtext?i._getIrregularField("connectAd")(i.config.adtext):"",n+=i._getIrregularField("title")(e,i.lang.pwdTitle).replace("#{username}",t.secureAccount),n+='<form id="'+i.$getId(e+"form")+'" class="pass-form" method="POST" autocomplete="off">',n+=i._getIrregularField("generalError")(e),n+=i._getHiddenField(r);for(var s=0;s<a.length;s++)n+=i._getRegularField(a[s]);return n+=i._getIrregularField("submit")(e,i.lang.submitText),n+="</form>",n+=i._getIrregularField("Links")(e,{type:t.type}),n+="</div>"},mobileAuth:function(){var n="<div id="+i.$getId(e+"Wrapper")+' class="tang-pass-wrapper">',r={staticpage:i.config.staticPage,u:i.config.u,token:i.config.token,tpl:i.config.product||i.config.tpl,isdynamic:1,type:"mobile"};return n+=i.config.adtext?i._getIrregularField("connectAd")(i.config.adtext):"",n+=i._getIrregularField("title")(e,i.lang.pwdTitle).replace("#{username}",t.secureAccount),n+='<form id="'+i.$getId(e+"form")+'" class="pass-form" method="POST" autocomplete="off">',n+=i._getIrregularField("generalError")(e),n+=i._getHiddenField(r),n+=i._getIrregularField("verifyCode")(e,i.lang.smsVerifyCode),n+=i._getIrregularField("submit")(e,i.lang.submitText),n+="</form>",n+=i._getIrregularField("Links")(e,{type:t.type}),n+="</div>"},emailAuth:function(){var n="<div id="+i.$getId(e+"Wrapper")+' class="tang-pass-wrapper">',r={staticpage:i.config.staticPage,u:i.config.u,token:i.config.token,tpl:i.config.product||i.config.tpl,isdynamic:1,type:"email"};return n+=i.config.adtext?i._getIrregularField("connectAd")(i.config.adtext):"",n+=i._getIrregularField("title")(e,i.lang.pwdTitle).replace("#{username}",t.secureAccount),n+='<form id="'+i.$getId(e+"form")+'" class="pass-form" method="POST" autocomplete="off">',n+=i._getIrregularField("generalError")(e),n+=i._getHiddenField(r),n+=i._getIrregularField("verifyCode")(e,i.lang.emailBtnText),n+=i._getIrregularField("submit")(e,i.lang.submitText),n+="</form>",n+=i._getIrregularField("Links")(e,{type:t.type}),n+="</div>"},userList:function(n){var r="<div id="+i.$getId(e+"Wrapper")+' class="tang-pass-wrapper">',a=[];r+=i.config.adtext?i._getIrregularField("connectAd")(i.config.adtext):"",r+=i._getIrregularField("title")(e,i.lang.userListTitle).replace("#{username}",t.displayusername),a.push('<ul class="pass-user-list" id="'+i.$getId(e+"List")+'">');for(var s=0,o=n.length;o>s;s++)n[s].i=s,0==s&&(n[s].checked=!0),a.push(i._getIrregularField("userList")(e,n[s]));return a.push("</ul>"),r+=a.join(""),r+=i._getIrregularField("submit")(e,i.lang.nextText),r+='<p class="pass-tip">'+i.lang.userListTip+"</p>",r+="</div>"},error:function(){var t="<div id="+i.$getId(e+"Wrapper")+' class="tang-pass-wrapper">';return t+=i._getIrregularField("title")("error",i.lang.errorTitle),t+="</div>"}};return r[e]&&r[e](n)},_getPlaceholderList:function(e){var t=this;return rendList={bind:[{label:"password",placeholder:"password"},{label:"verifyCode",placeholder:"mobile"==t.initDataStatus.bindType?"bindmobileverifyCode":"bindemailverifyCode"}],pwdAuth:[{label:"password",placeholder:"password"}],emailAuth:[{label:"verifyCode",placeholder:"emailVerifyCode"}],mobileAuth:[{label:"verifyCode",placeholder:"smsVerifyCode"}]},rendList[e]},_getAccountStatus:function(e){var t=this;F.data.jsonp("/v2/unite-init?tpl="+(t.config.tpl||t.config.product)+"&token="+encodeURIComponent(t.config.token)).success(function(i){if(0!=i.errInfo.no){var n=P(t.getElement()),r=t._getTemplate("error");n.empty(),n.get(0).appendChild(P(r).get(0))}else if(i.data.bindType="auth"==i.data.status?"":i.data.bindType,t.action="auth"==i.data.status?"userList":i.data.status,t.initDataStatus=i.data,"userList"==t.action&&"[object Array]"==Object.prototype.toString.call(t.initDataStatus.userList)&&1===t.initDataStatus.userList.length){var a=t.initDataStatus.userList[0];a.action=1==t.initDataStatus.pwdAuth?"pwdAuth":a.type+"Auth",t.authData=a,t.draw(a)}else t.draw(i.data);t.initCallback&&t.initCallback(i.data),e&&e(i.data)})},setToken:function(e,t){var i=this;i.config.token=e,i._getAccountStatus(t)},draw:function(e){var t=this,i=P(t.getElement());t.action=e.action||t.action;var n=t._getTemplate(t.action,e);i.empty(),i.get(0).appendChild(P(n).get(0)),"userList"==t.action||(t._getPlaceholder(t._getPlaceholderList(t.action)),t._setValidator()),t._setaccEvent(t.action),t._log("show",t.action),P("a").on("click",function(){t._log("click",t.action)})},render:function(e,t){var i=this;i.getElement()||i.$mappingDom("",e||document.body);var n=P(i.getElement());n.addClass(i.constant.CONTAINER_CLASS),t&&(i.initCallback=t),i._getAccountStatus()},_setaccEvent:function(){var e=this;if("userList"==e.action)P("li",e.getElement("userListList")).on("click",function(){e._log("click",e.action);var t=this;P(t).hasClass(e.constant.CHECK_CLASS)||(P("."+e.constant.CHECK_CLASS,t.parentNode).removeClass(e.constant.CHECK_CLASS),P(t).addClass(e.constant.CHECK_CLASS))}),P(e.getElement("userListsubmit")).on("click",function(){e._log("click",e.action);var t=P("."+e.constant.CHECK_CLASS,e.getElement(e.$getId(e.action+"Wrapper"))),i=t&&t.attr("data-index")||0,n=e.initDataStatus.userList[i];n.action=1==e.initDataStatus.pwdAuth?"pwdAuth":n.type+"Auth",e.authData=n,e.draw(n)});else{var t=function(t){e._eventHandler.entrance.apply(e,[t])};P(e.getElement(e.action+"form")).on("submit",t),P(".pass-text-input",e.getElement(e.action+"Wrapper")).on({focus:t,blur:t,change:t,keyup:t,mouseover:t,mouseout:t}),P(e.getElement(e.action+"timer")).on("click",function(t){t.preventDefault(),e._log("click",e.action);var i={url:"/v2/unite-send",data:{token:e.config.token,tpl:e.config.product,type:e.initDataStatus.bindType||e.authData.type},vcodeinitText:t.target.value};e._sendVcode(t,i)}),P(e.getElement("secureLogin")).on("click",function(){e._log("click",e.action),e.authData=e.authData||{},e.authData.action="mobile"http://passport.baidu.com/passApi/js/==e.authData.type?"mobileAuth":"emailAuth",e.draw(e.authData)}),P(e.getElement("pwdAuth")).on("click",function(){e._log("click",e.action),e.authData=e.authData||{},e.authData.action="pwdAuth",e.draw(e.authData)})}},_sendVcode:function(e,t){var i,n=e.target,r=this,a=60;n.disabled||(n.disabled=!0,clearTimeout(i),n.value=t.vcodeingText||r.lang.vcodeingText,F.data.jsonp(t.url,t.data).success(function(e){function s(){return 0==--a?(n.value=t.vcodeinitText,void(n.disabled=!1)):(n.value=r.lang.reSend+"("+a+")"http://passport.baidu.com/passApi/js/,void(i=setTimeout(function(){s()},1e3)))}0==e.errInfo.no?(s(),r._validateSuccess({})):(n.disabled=!1,n.value=t.vcodeinitText,(e.errInfo.msg.indexOf("系统繁忙")>-1||r._inArray(e.errInfo.no,["-1","-3","7","12","13","62007","62005","500010","400005","400003"])>-1)&&(e.errInfo.msg+='，<a href="http://passport.baidu.com/v2/?ucenterfeedback#upgrade">问题反馈</a>'),r._validateError({msg:e.errInfo.msg}))}))},_setValidator:function(){var e=this;e.validatorInited||(e.validatorInited=!0,e.validateRules={password:{rules:["required"],desc:e.lang.password},verifyCode:{rules:["required"],desc:"auth"==e.initDataStatus.status?"mobile"http://passport.baidu.com/passApi/js/==e.authData.type?e.lang.smsVerifyCode:e.lang.emailVerifyCode:"mobile"==e.initDataStatus.bindType?e.lang.bindmobileverifyCode:e.lang.bindemailverifyCode}},e._validator.init(e,e.validateRules))},_log:function(e,t){var i=this,n="pcConnect_"+e+"_"+t;if(!i.logHistory[n]){var r="https://passport.baidu.com/img/v.gif?type="+n+"&v="+(new Date).getTime();if(r){var a=new Image;a.onload=a.onerror=function(){a.onload=a.onerror=null,a=null},a.src=r,i.logHistory[n]=!0}}},_inArray:function(e,t){var i;if(t){i=t.length;for(var n=0;i>n;n++)if(e===t[n])return n}return-1},_validateError:function(e,t){var i=this,n=P(i.getElement(e.field));n&&n.addClass(i.constant.ERROR_CLASS),this.getElement("error").innerHTML=e.msg,t&&t.callback&&callback()},_validateSuccess:function(e,t){var i=this,n=P(i.getElement(e.field));this.getElement("error").innerHTML="",n.removeClass(i.constant.ERROR_CLASS),t&&t.callback&&callback()},_eventHandler:function(){var e,t={focus:function(t){var i=e.fireEvent("fieldFocus",{ele:this});i&&(this.addClass(e.constant.FOCUS_CLASS),this.removeClass(e.constant.ERROR_CLASS),P(e.getElement(t+"Label")).addClass(e.constant.LABEL_FOCUS_CLASS),e._log("click",e.action))},blur:function(t){var i=e.fireEvent("fieldBlur",{ele:this});i&&(this.removeClass(e.constant.FOCUS_CLASS),P(e.getElement(t+"Label")).removeClass(e.constant.LABEL_FOCUS_CLASS))},mouseover:function(){var t=e.fireEvent("fieldMouseover",{ele:this});t&&this.addClass(e.constant.HOVER_CLASS)},mouseout:function(){var t=e.fireEvent("fieldMouseout",{ele:this});t&&this.removeClass(e.constant.HOVER_CLASS)},keyup:function(){e.fireEvent("fieldKeyup",{ele:this})}},i={focus:{},blur:{password:function(t){var i=this.get(0).value;i.length&&e.validate(t)},verifyCode:function(t){var i=this.get(0).value;i.length&&e.validate(t)}},change:{},click:{},keyup:{},submit:function(t){t.preventDefault(),e._log("click",e.action),e.validateAll({success:function(){e.getElement(e.action+"submit").focus();var t=e.fireEvent("beforeSubmit");if(t){var i=P.form.json(e.getElement(e.action+"form"));if("bind"==e.action&&i.verifyCode){try{a(131);var n=new L("10001","",e.rsa);i.password=N(n,i.password)}catch(r){}i.loginpass=i.verifyCode,delete i.verifyCode}if("pwdAuth"==e.action&&i.password){try{a(131);var n=new L("10001","",e.rsa);i.password=N(n,i.password)}catch(r){}i.loginpass=i.password,delete i.password}"mobileAuth"!=e.action&&"emailAuth"!=e.action||!i.verifyCode||(i.loginpass=i.verifyCode,delete i.verifyCode),F.data.post("/v2/unite-bind",i).success(function(t){if(0==t.errInfo.no){var i=e.fireEvent("connectSuccess",{rsp:t});if(!i)return;window.location.href=t.data.u}else{var i=e.fireEvent("connectError",{rsp:t});if(!i)return;(t.errInfo.msg.indexOf("系统繁忙")>-1||e._inArray(t.errInfo.no,["5","6","7","10","12","13","-1","-3","-2","-6","7","400011","400010","500010","500012","400005","400003","62007","62005","62004","500002","500010"])>-1)&&(t.errInfo.msg+='，<a href="http://passport.baidu.com/v2/?ucenterfeedback#upgrade">帮助中心</a>'),e._validateError({msg:t.errInfo.msg})}})}}},!0)}};return{entrance:function(n){e=this;var r=(P(n.target),n.target.name);if(!r&&n.target.id){var a=n.target.id.match(/\d+__(.*)$/);a&&(r=a[1])}r&&(t.hasOwnProperty(n.type)&&t[n.type].apply(P(n.target),[r,n]),i.hasOwnProperty(n.type)&&("function"==typeof i[n.type]&&i[n.type].apply(P(n.target),[n]),i[n.type].hasOwnProperty(r)&&i[n.type][r].apply(P(n.target),[r,n])))}}}(),$dispose:function(){var e=this;e.disposed||(P.dom(e.getElement()).removeClass(e.constant.CONTAINER_CLASS),e.getElement().removeChild(e.getElement("form")),$.Base.prototype.$dispose.call(e))}}),$});