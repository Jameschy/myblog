passport._define("bind.js"/*tpa=http://passport.baidu.com/passApi/js/bind.js*/,function(){function e(e){return d(t(c(e),e.length*h))}function t(e, t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,l=-271733879,c=-1732584194,d=271733878,u=0; u<e.length; u+=16){var f=r,g=l,p=c,m=d;r=a(r,l,c,d,e[u+0],7,-680876936),d=a(d,r,l,c,e[u+1],12,-389564586),c=a(c,d,r,l,e[u+2],17,606105819),l=a(l,c,d,r,e[u+3],22,-1044525330),r=a(r,l,c,d,e[u+4],7,-176418897),d=a(d,r,l,c,e[u+5],12,1200080426),c=a(c,d,r,l,e[u+6],17,-1473231341),l=a(l,c,d,r,e[u+7],22,-45705983),r=a(r,l,c,d,e[u+8],7,1770035416),d=a(d,r,l,c,e[u+9],12,-1958414417),c=a(c,d,r,l,e[u+10],17,-42063),l=a(l,c,d,r,e[u+11],22,-1990404162),r=a(r,l,c,d,e[u+12],7,1804603682),d=a(d,r,l,c,e[u+13],12,-40341101),c=a(c,d,r,l,e[u+14],17,-1502002290),l=a(l,c,d,r,e[u+15],22,1236535329),r=n(r,l,c,d,e[u+1],5,-165796510),d=n(d,r,l,c,e[u+6],9,-1069501632),c=n(c,d,r,l,e[u+11],14,643717713),l=n(l,c,d,r,e[u+0],20,-373897302),r=n(r,l,c,d,e[u+5],5,-701558691),d=n(d,r,l,c,e[u+10],9,38016083),c=n(c,d,r,l,e[u+15],14,-660478335),l=n(l,c,d,r,e[u+4],20,-405537848),r=n(r,l,c,d,e[u+9],5,568446438),d=n(d,r,l,c,e[u+14],9,-1019803690),c=n(c,d,r,l,e[u+3],14,-187363961),l=n(l,c,d,r,e[u+8],20,1163531501),r=n(r,l,c,d,e[u+13],5,-1444681467),d=n(d,r,l,c,e[u+2],9,-51403784),c=n(c,d,r,l,e[u+7],14,1735328473),l=n(l,c,d,r,e[u+12],20,-1926607734),r=i(r,l,c,d,e[u+5],4,-378558),d=i(d,r,l,c,e[u+8],11,-2022574463),c=i(c,d,r,l,e[u+11],16,1839030562),l=i(l,c,d,r,e[u+14],23,-35309556),r=i(r,l,c,d,e[u+1],4,-1530992060),d=i(d,r,l,c,e[u+4],11,1272893353),c=i(c,d,r,l,e[u+7],16,-155497632),l=i(l,c,d,r,e[u+10],23,-1094730640),r=i(r,l,c,d,e[u+13],4,681279174),d=i(d,r,l,c,e[u+0],11,-358537222),c=i(c,d,r,l,e[u+3],16,-722521979),l=i(l,c,d,r,e[u+6],23,76029189),r=i(r,l,c,d,e[u+9],4,-640364487),d=i(d,r,l,c,e[u+12],11,-421815835),c=i(c,d,r,l,e[u+15],16,530742520),l=i(l,c,d,r,e[u+2],23,-995338651),r=o(r,l,c,d,e[u+0],6,-198630844),d=o(d,r,l,c,e[u+7],10,1126891415),c=o(c,d,r,l,e[u+14],15,-1416354905),l=o(l,c,d,r,e[u+5],21,-57434055),r=o(r,l,c,d,e[u+12],6,1700485571),d=o(d,r,l,c,e[u+3],10,-1894986606),c=o(c,d,r,l,e[u+10],15,-1051523),l=o(l,c,d,r,e[u+1],21,-2054922799),r=o(r,l,c,d,e[u+8],6,1873313359),d=o(d,r,l,c,e[u+15],10,-30611744),c=o(c,d,r,l,e[u+6],15,-1560198380),l=o(l,c,d,r,e[u+13],21,1309151649),r=o(r,l,c,d,e[u+4],6,-145523070),d=o(d,r,l,c,e[u+11],10,-1120210379),c=o(c,d,r,l,e[u+2],15,718787259),l=o(l,c,d,r,e[u+9],21,-343485551),r=s(r,f),l=s(l,g),c=s(c,p),d=s(d,m)}return Array(r,l,c,d)}function r(e,t,r,a,n,i){return s(l(s(s(t,e),s(a,i)),n),r)}function a(e,t,a,n,i,o,s){return r(t&a|~t&n,e,t,i,o,s)}function n(e,t,a,n,i,o,s){return r(t&n|a&~n,e,t,i,o,s)}function i(e,t,a,n,i,o,s){return r(t^a^n,e,t,i,o,s)}function o(e,t,a,n,i,o,s){return r(a^(t|~n),e,t,i,o,s)}function s(e,t){var r=(65535&e)+(65535&t),a=(e>>16)+(t>>16)+(r>>16);return a<<16|65535&r}function l(e,t){return e<<t|e>>>32-t}function c(e){for(var t=Array(),r=(1<<h)-1,a=0;a<e.length*h;a+=h)t[a>>5]|=(e.charCodeAt(a/h)&r)<<a%32;return t}function d(e){for(var t=m?"0123456789ABCDEF":"0123456789abcdef",r="",a=0;a<4*e.length;a++)r+=t.charAt(e[a>>2]>>a%4*8+4&15)+t.charAt(e[a>>2]>>a%4*8&15);return r}var u=u||window.passport||{},f=u.tangramInst||f||window.baidu;!function(e){e.apiDomain={staticDomain:window.location?"http:"==window.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com":"http:"==document.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com"}}(u);var g=null;if("function"!=typeof g)var g=function(){};g._baiduInstName=g._baiduInstName||"bdInst_"+(new Date).getTime();var p=p||f.baiduInstance||window.baiduInstance;window[g._baiduInstName]=window[g._baiduInstName]||p,g.resourcePath="",g.skinName="default",g.version="1.0.0.0",/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",!1,!0),f.form=f.form||{},f.url=f.url||{},f.url.escapeSymbol=f.url.escapeSymbol||function(e){return String(e).replace(/[#%&+=\/\\\ \　\f\r\n\t]/g,function(e){return"%"+(256+e.charCodeAt()).toString(16).substring(1).toUpperCase()})},f.form.json=f.form.json||function(e,t){function r(e,t){var r=g[e];r?(r.push||(g[e]=[r]),g[e].push(t)):g[e]=t}for(var a,n,i,o,s,l,c,d,u=e.elements,t=t||function(e){return e},g={},p=0,m=u.length;m>p;p++)if(a=u[p],i=a.name,!a.disabled&&i)switch(n=a.type,o=f.url.escapeSymbol(a.value),n){case"radio":case"checkbox":a.checked&&r(i,t(o,i));break;case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":r(i,t(o,i));break;case"select-multiple":for(s=a.options,c=s.length,l=0;c>l;l++)d=s[l],d.selected&&r(i,t(d.value,i))}return g},g.Base=function(){f.lang.Class.call(this),this._ids={},this._eid=this.guid+"__"},f.lang.inherits(g.Base,f.lang.Class,"http://passport.baidu.com/passApi/js/magic.Base").extend({getElement:function(e){return document.getElementById(this.$getId(e))},getElements:function(){var e={},t=this._ids;for(var r in t)e[r]=this.getElement(r);return e},$getId:function(e){return e=f.lang.isString(e)?e:"",this._ids[e]||(this._ids[e]=this._eid+e)},$mappingDom:function(e,t){return f.lang.isString(t)?this._ids[e]=t:t&&t.nodeType&&(t.id?this._ids[e]=t.id:t.id=this.$getId(e)),this},$hide:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="none",e.style.visibility="hidden"),this},$show:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="block",e.style.visibility="visible",e.style.opacity="1"),this},$dispose:function(){this.fire("ondispose")&&f.lang.Class.prototype.dispose.call(this)}}),g.control=g.control||{},function(){function e(e,t){var a,n=e.getAttribute(t),i=!1;if(n&&(a=n.match(r[0]))){i={};for(var o,s=0;s<a.length;s++)o=a[s].match(r[1]),!isNaN(o[2])&&(o[2]=+o[2]),r[2].test(o[2])&&(o[2]=o[2].replace(r[3],"$2")),r[4].test(o[2])&&(o[2]=r[5].test(o[2])),i[o[1]]=o[2]}return i}function t(t,r){var a=e(t,"tang-event");if(a)for(var n in a){var i=a[n].substr(1);i.indexOf("(")<0&&(i+="()"),f.dom(t).on(n,new Function(g._baiduInstName+"('"+r+"') && "+g._baiduInstName+"('"+r+"')"+i))}}g.setup=g.setup||function(r,a,n){var i=e(r,"tang-param")||{};for(var o in n)i[o]=n[o];var s=new a(i);s.$mappingDom("",r),t(r,s.guid);for(var l=r.getElementsByTagName("*"),o=l.length-1;o>=0;o--)t(l[o],s.guid);return s};var r=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i]}();var u=u||window.passport||{};u.err=u.err||{},function(e){var t=null;t="function"===(typeof e.getCurrent).toLowerCase()?e.getCurrent():{errMsg:{},labelText:{}},t.errMsg.reg={"-1":{msg:'系统错误,休息一会儿,请您稍后再试,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:"isAgree"},100027:{msg:"百度正在进行系统升级，暂时不能提供服务，敬请谅解",field:"isAgree"},110002:{msg:"用户名仅支持中英文、数字和下划线,且不能为纯数字",field:"userName"},130006:{msg:'您的用户名不可用,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:"userName"},130007:{msg:'您的用户名不可用,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:"userName"},110023:{msg:'该邮箱已注册可<a href="http://passport.baidu.com/v2/?login#{urldata}">直接登录</a>,如忘记密码<a href="http://passport.baidu.com/?getpassindex#{urldata}">点此处找回</a>',field:"email"},110024:{msg:'该邮箱已被注册,但未激活,请到验证邮件中激活或者<a href="#{gotourl}" target="_blank">重发验证邮件</a>',field:"email"},130036:{msg:'为了确保您能及时收到邮件,请使用<a href="http://www.baidu.com/search/passport_help.html#09" target="_blank">主流邮箱</a>',field:"email"},10:{msg:"请您填写用户名",field:"userName"},11:{msg:"用户名仅支持中英文、数字和下划线,且不能为纯数字",field:"userName"},12:{msg:"用户名仅支持中英文、数字和下划线,且不能为纯数字",field:"userName"},14:{msg:"此用户名太受欢迎,请更换一个",field:"userName"},15:{msg:"您的用户名不可用",field:"userName"},16:{msg:'系统错误,请您稍后再试,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:"isAgree"},20:{msg:"请填写密码",field:"password"},21:{msg:"密码必须由8-14个字符组成",field:"password"},22:{msg:"密码与确认密码不一致",field:"verifyPass"},23:{msg:"密码仅能由数字,字母和符号组成 / 密码中不能含有空格",field:"password"},24:{msg:"您的密码太过简单,请使用字母和数字的组合,否则无法注册成功",field:"password"},30:{msg:"请您输入新的邮箱",field:"email"},31:{msg:"您填写的邮箱格式有误,请重新输入",field:"email"},40:{msg:"请输入验证码",field:"verifyCode"},41:{msg:"验证码格式错误",field:"verifyCode"},42:{msg:"您输入的验证码有误",field:"verifyCode"},"-2":{msg:'服务正在升级中,请您稍后再试,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:""}},t.errMsg.regPhone={"-1":{msg:'系统错误,休息一会儿,请您稍后再试,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:"isAgree"},100027:{msg:"百度正在进行系统升级，暂时不能提供服务，敬请谅解",field:"isAgree"},130018:{msg:"请您输入手机号",field:"phone"},130019:{msg:"您输入的手机号格式有误",field:"phone"},130020:{msg:"该手机已注册可直接登录",field:"phone"},130035:{msg:'您的手机号已被注册,请<a href="http://passport.baidu.com/v2/?login#{urldata}">直接登录</a>或更换手机号注册',field:"phone"},130017:{msg:"发送短信过多,请24小时后再试",field:"verifyCodeSend"},130038:{msg:"发送短信过于频繁,请您稍后再试",field:"verifyCodeSend"},130010:{msg:"请您输入密码",field:"password"},130011:{msg:"密码必须由8-14个字符组成",field:"password"},110013:{msg:"密码仅支持数字,字母和符号,且密码中不能含有空格",field:"password"},110012:{msg:"密码过于简单,建议使用数字加字母组合,否则无法注册成功",field:"password"},130023:{msg:"请输入短信激活码",field:"smsCode"},130021:{msg:"请您输入短信激活码",field:"smsCode"},130022:{msg:"短信激活码错误",field:"smsCode"},130003:{msg:"您输入的短信激活码有误",field:"smsCode"},130036:{msg:'为了确保您能及时收到邮件,请使用<a href="http://www.baidu.com/search/passport_help.html#09" target="_blank">主流邮箱</a>',field:"smsCode"},130037:{msg:"激活码错误次数过多,请24小时后重新注册",field:"smsCode"},130004:{msg:"激活码已失效,请您重新获取",field:"smsCode"},130032:{msg:"您还未接受百度用户协议,请勾选",field:"isAgree"},130039:{msg:'系统繁忙,请稍后再试,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:"isAgree"},130040:{msg:"",field:""},130044:{msg:"系统检测到当前帐号通过非法渠道注册，为了您的帐号安全，请更换手机号重试",field:""},130041:{msg:"验证码为空",field:"confirmVerifyCode"},130042:{msg:"验证码错误",field:"confirmVerifyCode"},340001:{msg:'网络不给力， 请刷新重试 ,<a href="http://passport.baidu.com/v2/?ucenterfeedback#{urldata}#reg">帮助中心</a>',field:""},400001:{msg:"已被其他帐号绑定",field:"phone"},400003:{msg:"已被其他帐号绑定",field:"phone"},400005:{msg:"已被其他帐号绑定",field:"phone"},400603:{msg:"当前您的手机号码仅支持快速注册，请您采用快速注册方式，注册百度帐号",field:"phone"},50023:{msg:"1个手机号30日内最多换绑3个账号",field:"phone"},50024:{msg:"注册过于频繁，请稍候再试",field:""},50025:{msg:"注册过于频繁，请稍候再试；也可以通过上行短信的方式进行注册",field:""},50030:{msg:"抱歉，该手机号的申请次数已达当日上限，请更换手机号",field:"phone"},50031:{msg:"抱歉，该手机号的申请次数已达当月上限，请更换手机号",field:"phone"},50032:{msg:"抱歉，该手机号的申请次数已达本季度上限，请更换手机号",field:"phone"},50036:{msg:"注册过于频繁，请稍后再试"},130045:{msg:"系统检测到当前帐号通过非法渠道注册，为了您的帐号安全，请使用正规渠道注册",field:"verifyCode"},50043:{msg:"当前浏览器版本过低，请升级或更换浏览器后重试",field:""},100060:{msg:"因系统升级暂不支持注册，预计6月7日恢复服务",field:"verifyCode"},71e3:{msg:"",field:""}},t.labelText.reg={captcha:"验证码",captchaAlt:"验证码图片",captchaChange:"换一张",captchaTip:"请输入图片中的字符,不区分大小写",agree:"阅读并接受",password:"密码",passwordPlaceholder:"请设置登录密码",baiduUserProtocal:"《百度用户协议》",getSMSKey:"获取短信验证码",register:"注册",strength:"强度：",strengthTip:"密码长度6~14位,字母区分大小写",phoneNum:"手机号",phoneNumTip:"请输入中国大陆手机号,其他用户不可见",foreignMobileError:"手机号码格式不正确",SMSKey:"短信激活码",SMSKeyTip:"请输入您手机短信中的激活码",SMSKeySendTip:'短信激活码已发送,请您在30分钟内填写。<a href="http://help.baidu.com/question?prod_en=passport&class=%D7%A2%B2%E1%BC%B0%B5%C7%C2%BC&id=1000318" target="_blank">无法获取</a>？',VoiceKeySendTip:'语音激活码已发送,请您在30分钟内填写。<a href="http://help.baidu.com/question?prod_en=passport&class=%D7%A2%B2%E1%BC%B0%B5%C7%C2%BC&id=1000318" target="_blank">无法获取</a>？',SMSKeyResendTip:"秒后重新获取激活码",SMSKeyResendTipMerge:"重新发送",account:"手机/邮箱",accountTip:"请输入中国大陆手机号或常用邮箱,可用于登录和找回密码,注册成功后,所有百度产品通用",account_username:"帐号",accountTip_username:"请输入中国大陆手机号/常用邮箱/用户名",email:"邮箱",emailTip:"请输入常用邮箱,通过验证后可用于登录和找回密码",userName:"用户名",userNamePlaceholder:"请设置用户名",userNameTip:"设置后不可更改<br>中英文均可，最长14个英文或7个汉字",confirmPassword:"确认密码",mailLengthError:"邮箱地址过长,请更换较短邮箱,总体不超过60个字符",mainEmailError:'为了确保您能及时收到邮件,请使用<a href="http://www.baidu.com/search/passport_help.html#09" target="_blank">主流邮箱</a>',pwdCharError:"密码仅支持数字,字母和符号,且密码中不能含有空格",matchPwdError:"密码与确认密码不一致",pwdLengthError:"密码必须由8-14个字符组成",checkLicenseError:"请勾选“阅读并接受百度用户协议”",userNameRulesError:"用户名不能超过7个汉字或14个字符",userNameNumberError:"用户名仅支持中英文、数字和下划线,且不能为纯数字",weakPwdError:"您的密码太过简单,请使用字母、数字和符号的组合,以便完成注册",userNameExistsError:"此用户名太受欢迎,请更换一个",nopwd:"",nopwdMsg:"请输入密码",weak:"弱",weakMsg:"请重新设置,试试数字、字母、符号组合",middle:"中",middleMsg:"您的密码还可以更复杂些",strong:"强",strongMsg:"您的密码很安全,请牢记！",placeholder:"可用于登录和找回密码",regMergePlaceholder:"手机/邮箱",regMergePlaceholder_username:"手机/邮箱/用户名",matchGmailError:"gmail邮箱收信时会自动过滤用户名内的圆点,您可以去掉用户名内的圆点直接注册",emailLimitError:"不能使用该邮箱",accountMergeError:"请填写正确的手机/邮箱",accountEmpty:"邮箱/手机",accountEmpty_username:"邮箱/手机/用户名",emailEmptyError:"您填写的邮箱格式有误,请重新输入",phoneEmptyError:"您填写的手机号格式有误,请输入11位大陆手机号",confirmVerCodeEmpty:"验证码为空",pwdChecklist_len:"长度为8~14个字符",pwdChecklist_cha:"支持数字,大小写字母和标点符号",pwdChecklist_spa:"不允许有空格",verifyCode:"验证码",verifyCodePlaceholder:"请输入验证码",smsVerifyCode:"短信激活码",sysUpdate:"服务正在升级中,请您稍后再试",multiTip:"一个手机号绑带多个帐号？<a href='http://passport.baidu.com/export/multi/index.html' target='_blank'>立即体验</a>",notsafeMsg:"为了提升您的帐号安全，建议不要使用您的常用密码，请重新输入",notsafe:"",baiduPersonalProtocal:"《百度隐私权保护声明》",sysError:"系统错误，休息一会儿，请稍后再试"},e.getCurrent=function(){return t}}(u.err);var u=u||window.passport||{};u.data=u.data||{},function(e){function t(e){this._requests=[],this._value=null,this._exception=null,this._isComplete=!1;var t=this;e(function(e){t._fulfillPromise(e)},function(e){t._breakPromise(e)})}function r(e,t,r){return t?r?function(r){return r=r||{},c.submit(d+t,a(r,e,p[e],m[e],!0),{charset:"utf-8",processData:function(t){if(t)for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];a&&(t[r]=decodeURIComponent(a))}return n(e,t)}})}:function(r){return c.jsonp(d+t,a(r,e,p[e],m[e],!1),{charset:"utf-8",processData:function(t){return n(e,t)}})}:s}function a(e,t,r,a,n){var i=n?{staticpage:_.staticPage,charset:_.charset||document.characterSet||document.charset||""}:{},o=h[t];if(o)for(var s in o){if(o.hasOwnProperty(s)){var c=o[s];i[s]="function"==typeof c?c(e):c}"verifypass"==s&&(i[s]=decodeURIComponent(i[s]))}if(i.token=_.token,i.tpl=_.product||"",i.subpro=_.subpro,i.apiver="v3",i.tt=(new Date).getTime(),e){r=r||{},a=a||{};for(var s in e)if(e.hasOwnProperty(s)){var d=a[s],u=d?d(e[s],e):e[s];"string"==typeof u&&(n&&(u=decodeURIComponent(u)),v[s]||(u=l.trim(u))),i[r[s]||s.toLowerCase()]=u}}return i}function n(t,r){if(e&&e.traceID&&e.traceID.getTraceID&&e.traceID.getTraceID(r),r){var a=y[t];a&&a(r);var n=r.errInfo,o=r,s=o;return n?o.errInfo=i(t,n,o):(n={no:r.err_no,msg:r.err_msg||""},delete o.err_no,delete o.err_msg,s={data:o,errInfo:i(t,n,o)}),s}return r}function i(e,t){var r=w[b[e]||e];if(r&&t&&0!=t.no){var a=r[t.no]||r[-1];if(a){var n=a.msg;t.msg=n,t.field=a.field}}return t}function o(t){if(e&&e.traceID&&e.traceID.getTraceID&&e.traceID.getTraceID(t),t){var r=t.errInfo,a=t;if(!r)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i&&(t[n]=decodeURIComponent(i))}r||(r={no:t.err_no,msg:t.err_msg||""},delete a.err_no,delete a.err_msg,t={data:a,errInfo:r})}return t}var s=function(){};t.prototype={get_isComplete:function(){return this._isComplete},get_value:function(){if(!this._isComplete)return void 0;if(this._exception)throw this._exception;return this._value},call:function(e){for(var t=[],r=0,a=arguments.length-1;a>r;r++)t[r]=arguments[r+1];return this.when(function(r){return r[e].apply(r,t)})},getValue:function(e){return this.when(function(t){return t[e]})},setValue:function(e,t){this.whenOnly(function(r){r[e]=t})},when:function(e,r,a){return t.when(this,e,r,a)},whenOnly:function(e,r,a){t.whenOnly(this,e,r,a)},success:function(e,t){return this.when(e,s,t)},fail:function(e,t){return this.when(s,e,t)},_enqueueOne:function(e){this._isComplete?this._notify(e):this._requests.push(e)},_notify:function(e){this._exception?e.breakPromise&&e.breakPromise(this._exception):e.fulfillPromise&&e.fulfillPromise(this._value)},_notifyAll:function(){for(var e=0,t=this._requests.length;t>e;e++)this._notify(this._requests[e])},_fulfillPromise:function(e){this._value=e,this._exception=null,this._isComplete=!0,this._notifyAll()},_breakPromise:function(e){this._value=null,this._exception=e||new Error("An error occured"),this._isComplete=!0,this._notifyAll()}},t.when=function(e,r,a,n){return new t(function(i,o){t.make(e)._enqueueOne({fulfillPromise:function(e){i(r?r.call(n,e):e)},breakPromise:function(e){if(a)try{i(a.call(n,e))}catch(t){o(t)}else o(e)}})})},t.whenOnly=function(e,r,a,n){t.make(e)._enqueueOne({fulfillPromise:function(e){r&&r.call(n,e)},breakPromise:function(e){a&&a.call(n,e)}})},t.make=function(e){return e instanceof t?e:t.immediate(e)},t.immediate=function(e){return new t(function(t){t(e)})};var l={};!function(e){var t=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");e.trim=function(e){return String(e).replace(t,"")},e.getUniqueId=function(e){return e+Math.floor(2147483648*Math.random()).toString(36)},e.g=function(e){return e?"string"==typeof e||e instanceof String?document.getElementById(e):!e.nodeName||1!=e.nodeType&&9!=e.nodeType?null:e:null},e.getParent=function(t){return t=e.g(t),t.parentElement||t.parentNode||null},e.encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e.array=e.array||{},e.array.indexOf=function(e,t,r){var a=e.length;for(r=0|r,0>r&&(r=Math.max(0,a+r));a>r;r++)if(r in e&&e[r]===t)return r;return-1},e.browser=e.browser||{},e.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,e.insertHTML=function(t,r,a){t=e.g(t);var n,i;return t.insertAdjacentHTML&&!e.browser.opera?t.insertAdjacentHTML(r,a):(n=t.ownerDocument.createRange(),r=r.toUpperCase(),"AFTERBEGIN"==r||"BEFOREEND"==r?(n.selectNodeContents(t),n.collapse("AFTERBEGIN"==r)):(i="BEFOREBEGIN"==r,n[i?"setStartBefore":"setEndAfter"](t),n.collapse(i)),n.insertNode(n.createContextualFragment(a))),t}}(l),e.base=l;var c={};!function(r){var a="__bdpp_pstc__"+(new Date).getTime(),n=a+"_form",i=a+"_ifr",o=function(e){if("object"==typeof e){var t=[];for(var r in e){var a=e[r];if(void 0!==a&&null!==a){t.length&&t.push("&");var n=encodeURIComponent("boolean"==typeof a?a?"1":"0":a.toString());t.push(encodeURIComponent(r),"=",n)}}return t.join("")}return"string"==typeof e?e:null},s=function(e,t){if(t=o(t),"string"==typeof t){var r=/\?/g.test(e);e+=(r?"&":"?")+o(t)}return e},c=function(e,t,r){e.setAttribute("type","text/javascript"),r&&e.setAttribute("charset",r),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)},d=function(e){if(e.clearAttributes)e.clearAttributes();else for(var t in e)e.hasOwnProperty(t)&&delete e[t];e&&e.parentNode&&e.parentNode.removeChild(e),e=null},u=function(e,t,r){function a(e){return function(){try{e?u.onfailure&&u.onfailure():(t.apply(window,arguments),clearTimeout(i)),window[n]=null,delete window[n]}catch(r){}finally{d(o)}}}var n,i,o=document.createElement("SCRIPT"),s="bd__cbs__",u=r||{},f=u.charset,g=u.queryField||"callback",p=u.timeOut||0,m=new RegExp("(\\?|&)"+g+"=([^&]*)");n=l.getUniqueId(s),window[n]=a(0),p&&(i=setTimeout(a(1),p)),e=e.replace(m,"$1"+g+"="+n),e.search(m)<0&&(e+=(e.indexOf("?")<0?"?":"&")+g+"="+n),c(o,e,f)},f=function(e,t){var r=[];r.push("<form id='",n,"' target='",i,"' "),r.push("action='",l.encodeHTML(e),"' method='post'>");for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];if(void 0!==o&&null!==o){var s=l.encodeHTML("boolean"==typeof o?o?"1":"0":o);r.push("<input type='hidden' name='",l.encodeHTML(a),"' value='",s,"' />")}}return r.push("</form>"),r.join("")},g=function(e,t,r,o){function s(e){return function(){try{e?o.onfailure&&o.onfailure():(r.apply(window,arguments),d&&clearTimeout(d)),window[u]=null,delete window[u]}catch(t){}}}o=o||{};var c=o.timeOut||0,d=!1,u=l.getUniqueId("bd__pcbs__");t[o.queryField||"callback"]="parent."+u;var g=f(e,t);if(l.g(n))l.getParent(n).innerHTML=g;else{var p=[];p.push("<div id='",a,"' style='display:none;'>"),p.push("<div>",g,"</div>"),p.push("<iframe name='",i,"' src='"+("https:"==(window.location?window.location.protocol.toLowerCase():document.location.protocol.toLowerCase())?"https://passport.baidu.com/passApi/html/_blank.html":"about:blank")+"' style='display:none;'></iframe>"),p.push("</div>"),l.insertHTML(document.body,"beforeEnd",p.join(""))}window[u]=s(),c&&(d=setTimeout(s(1),c)),l.g(n).submit()};r.jsonp=function(r,a,n){return n=n||{},e&&e.traceID&&e.traceID.createTraceID&&(a.traceid=e.traceID.createTraceID()),new t(function(e,t){r=s(r,a),u(r,function(t){n.processData&&(t=n.processData(t)),e&&e(t)},{charset:n.charset,queryField:n.queryField,timeOut:n.timeOut,onfailure:function(){t&&t()}})})},r.submit=function(r,a,n){return e&&e.traceID&&e.traceID.createTraceID&&(a.traceid=e.traceID.createTraceID()),r&&a?new t(function(e){g(r,a,function(t){n.processData&&(t=n.processData(t)),e&&e(t)},n)}):void 0};var p=[];r.load=function(e){return new t(function(t){var r=p.push(new Image)-1,a=!1,n=setTimeout(function(){a=!0,t&&t()},1e3);p[r].onload=function(){clearTimeout(n),a||t&&t(),a=!0,p[r]=p[r].onload=null},p[r].src=e})}}(c);var d="https://passport.baidu.com",f={getApiInfo:"/v2/api/?getapi",getLoginHistory:"/v2/api/?loginhistory",loginCheck:"/v2/api/?logincheck",getVerifyCodeStr:"/v2/?reggetcodestr",getRegSmsVerifyCodeStr:"/v2/?regsmscodestr",checkUserName:"/v2/?regnamesugg",checkPassword:"/v2/?regpwdcheck",checkMail:"/v2/?regmailcheck",isUserNoName:"/v2/api/?ucenteradduname",checkPhone:"/v2/?regphonecheck",getphonestatus:"/v2/?getphonestatus",sendPhoneCode:"/v2/?regphonesend",multiBind:"/v2/?multiaccountassociate",multiUnbind:"/v2/?multiaccountdisassociate",multiCheckUserName:"/v2/?multiaccountusername",multiGetaccounts:"/v2/?multiaccountget",multiSwitchuser:"/v2/?loginswitch",checkVerifycode:"/v2/?checkvcode",getRsaKey:"/v2/getpublickey",authwidGetverify:"/v2/sapi/authwidgetverify",checkIDcard:"/v3/finance/main/idnumcert",checkIDcardSecondStep:"/v3/finance/main/upcert",checkIDcardAllStep:"/v3/finance/main/idnumcert",checkIDcardState:"/v3/finance/main/checkupcert"},g={login:"/v2/api/?login",reg:"/v2/api/?reg",fillUserName:"/v2/api/?ucenteradduname",regPhone:"/v2/api/?regphone",checkIDcard:"/v3/finance/main/idnumcert",checkIDcardSecondStep:"/v3/finance/main/upcert",checkIDcardAllStep:"/v3/finance/main/idnumcert"},p={getApiInfo:{apiType:"class"},login:{memberPass:"mem_pass",safeFlag:"safeflg",isPhone:"isPhone",timeSpan:"ppui_logintime",logLoginType:"logLoginType"},fillUserName:{selectedSuggestName:"pass_fillinusername_suggestuserradio",timeSpan:"ppui_fillusernametime"},reg:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"},regPhone:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"}},m={loginCheck:{isPhone:function(e){return e?"true":"false"}},login:{memberPass:function(e){return e?"on":""}}},h={checkPassword:{fromreg:1},reg:{registerType:1,verifypass:function(e){return e.password}}},v={password:!0},y={login:function(){}},b={checkUserName:"reg",checkMail:"reg",checkPhone:"regPhone",sendPhoneCode:"regPhone",multiCheckUserName:"multiBind",multiSwitchuser:"changeUser",checkVerifycode:"checkVerifycode"},w=u.err.getCurrent().errMsg||u.err.getCurrent(),_={};e.setContext=function(e){_.product=e.product||_.product,_.charset=e.charset||_.charset,_.staticPage=e.staticPage||_.staticPage,_.token=e.token||_.token,_.subpro=e.subpro||_.subpro},e.traceID={headID:e.traceID&&e.traceID.headID||"",flowID:e.traceID&&e.traceID.flowID||"",cases:e.traceID&&e.traceID.cases||"",initTraceID:function(e){var t=this;e&&e.length>0?(t.headID=e.slice(0,6),t.flowID=e.slice(6,8)):t.destory()},createTraceID:function(){var e=this;return e.headID+e.flowID+e.cases},startFlow:function(e){var t=this,r=t.getFlowID(e);0===t.flowID.length||t.flowID===r?(t.createHeadID(),t.flowID=r):t.finishFlow(r)},finishFlow:function(){var e=this;e.destory()},getRandom:function(){return parseInt(90*Math.random()+10,10)},createHeadID:function(){var e=this,t=(new Date).getTime()+e.getRandom().toString(),r=Number(t).toString(16),a=r.length,n=r.slice(a-6,a).toUpperCase();e.headID=n},getTraceID:function(e){var t=this,r=e&&e.traceid||"";t.initTraceID(r)},getFlowID:function(e){var t={login:"01",reg:"02"};return t[e]},setData:function(e){var t=this;return e.data?e.data.traceid=t.createTraceID():e.url=e.url+(e.url.indexOf("?")>-1?"&":"?")+"traceid="+t.createTraceID(),e},destory:function(){var e=this;e.headID="",e.flowID=""}};for(var C in f)f.hasOwnProperty(C)&&(e[C]=r(C,f[C]));for(var C in g)g.hasOwnProperty(C)&&(e[C]=r(C,g[C],!0));e.jsonp=function(e,t){return 0!=e.indexOf("http")&&(e=d+e),t=t||{},t.flag_code&&1==t.flag_code||(t.apiver="v3"),t.tt=(new Date).getTime(),c.jsonp(e,t,{charset:"utf-8",processData:function(e){return o(e)}})},e.post=function(e,t){return t=t||{},"wap"!==t.apitype&&(e=d+e),t.staticpage=t.staticpage||_.staticPage,t.charset=t.charset||_.charset||document.characterSet||document.charset||"",t.token=t.token||_.token,t.tpl=t.tpl||_.product,c.submit(e,t,{charset:"utf-8",processData:function(e){return o(e)}})},e.request=c}(u.data),g.passport=f.lang.createClass(function(){this._validateInfo={}},{type:"magic.passport",superClass:g.Base}).extend({_getRegularField:function(e){var t=e.pwd?"password":"text",r=this,a='autocomplete="off"',n=e.maxLength?'maxlength="'+e.maxLength+'"':"",i=e.tip?e.tip:"",o=e.value?e.value:"",s=e.field+""=="verifycode"?"none":"",l="";l="text"===t?'<input type="text" style="display:none;">':'<input type="password" style="display: none;">';var c='<p id="'+r.$getId(e.field+"Wrapper")+'" class="pass-form-item pass-form-item-'+e.field+'" style="display:'+s+'">'+(e.label?'<label for="'+r.$getId(e.field)+'" id="'+r.$getId(e.field+"Label")+'" class="pass-label pass-label-'+e.field+'">'+e.label+"</label>":"")+l+'<input id="'+r.$getId(e.field)+'" type="'+t+'" name="'+e.field+'" class="pass-text-input pass-text-input-'+e.field+'" '+n+(e.placeholder?'placeholder="'+e.placeholder+'" ':"")+a+(e.disabled?'" disabled':"")+' value="'+o+'"/>'+(e.noError?"":'<span id="'+r.$getId(e.field+"Error")+'" class="pass-item-error pass-item-error-'+e.field+'"></span>')+(e.hasSucc?'<span id="'+r.$getId(e.field+"Succ")+'" class="pass-item-succ pass-item-succ-'+e.field+'" style="display:none;"></span>':"")+'<span id="'+r.$getId(e.field+"Tip")+'" class="pass-item-tip pass-item-tip-'+e.field+'" style="display:none"><span id="'+r.$getId(e.field+"TipText")+'" class="pass-item-tiptext pass-item-tiptext-'+e.field+'">'+i+"</span></span></p>";return c},_getHiddenField:function(e,t){var r,a=this,n='<p id="'+a.$getId(t||"hiddenFields")+'" style="display:none">';for(var i in e)e.hasOwnProperty(i)&&(r="string"==typeof e[i]?e[i].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#39;"):e[i],n+='<input type="hidden" id="'+a.$getId((t?t+"_":"")+i)+'" name="'+i+'" value="'+r+'" />');return n+="</p>"},_setEvent:function(){var e=this,t=this.getElement(),r=function(t){e._eventHandler.entrance.apply(e,[t])};f(e.getElement()).on("resize",function(){var e=(navigator.userAgent,!navigator.userAgent.match(/OS [1-8]_\d[_\d]* like Mac OS X/i)),t=!!navigator.userAgent.toString().match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r=navigator.userAgent.toString().indexOf("iPad");if(e&&t&&null!=r){var a=document.getElementsByClassName("popBox");null!=a&&a.length>0&&(a[0].style.height=window.screen.height>document.body.clientHeight?window.screen.height*(window.screen.height/document.body.clientHeight)+120+"px":window.screen.height*(window.screen.height/document.body.clientHeight))}}),f(e.getElement("form")).on("submit",r),f(e.getElement("license")).on("click",r),f(e.getElement("verifyCodeChange")).on("click",r),f(e.getElement("verifyCodeSend")).on("click",r),f(e.getElement("smsVcodeSend")).on("click",r),f(t).delegate(".pass-suggest-item label","click",r),f(".pass-text-input",e.getElement()).on({focus:r,blur:r,change:r,keyup:r,mouseover:r,mouseout:r})},_validator:{confStorage:{},builtInMsg:{required:"请您输入%s",phone:"手机号码格式不正确",email:"邮箱格式不正确",idcard:"身份证格式不正确"},builtInRules:{required:/\S+/,phone:/^1[3456789]\d{9}$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,idcard:/(^\d{15}$)|(^\d{17}(\d|X|x)$)/},init:function(e,t){this.confStorage[e.$getId()]=t},validate:function(e,t,r,a){var n=e.getElement(t),i={field:t},o=/^\s*(.+?)\s*$/;if(!n||0===+n.offsetHeight)return!1;for(var s=n.value.replace(o,"$1"),l=this.confStorage[e.$getId()][t],c=l.rules,d=0,u=c.length;u>d;d++){var f,g=c[d],p=this.builtInRules[g];if(f="[object function]"===Object.prototype.toString.call(p).toLowerCase()?p.call(e,n,a):new RegExp(p).test(s),!f)return i.error=!0,e._validateInfo[t]=0,i.msg=this.builtInMsg[g].replace(/\%s/,l.desc),e._validateError(i),void r.error(i)}l.asyncRule?l.asyncRule.call(e,{success:function(a){i.error=!1,i.data=a.data,e._validateInfo[t]=1,e._validateSuccess(i),r.success(i)},error:function(a){i.error=!0,e._validateInfo[t]=0,i.msg=a.msg,e._validateError(i),r.error(i)}},a):(i.error=!1,e._validateInfo[t]=1,e._validateSuccess(i),r.success(i))},validateAll:function(e,t,r){function a(){s=!0,o?t&&t.error(l):t&&t.success(l)}var n=this.confStorage[e.$getId()],i=0,o=!1,s=!1,l=[],c=this._getActiveValidate(e,!0);for(var d in n){if(s)break;this.validate(e,d,{success:function(e){i++,l.push(e),i===c&&a()},error:function(e){return o=!0,i++,l.push(e),r?void a():void(i===c&&a())}},"all")}},_getActiveValidate:function(e,t){var r=this.confStorage[e.$getId()],a=[];for(var n in r){var i=e.getElement(n);i&&0!==i.offsetHeight&&a.push(i)}return t?a.length:a},addRule:function(e,t){var r={};r[e]=t,f.extend(this.builtInRules,r)},addMsg:function(e,t){var r={};r[e]=t,f.extend(this.builtInMsg,r)}},validate:function(e,t){var r=this,a=r.fireEvent("beforeValidate",{validate:{field:e,ele:f(r.getElement(e))}});a&&r._validator.validate(r,e,{success:function(e){var a=r.fireEvent("validateSuccess",{validate:e});a&&t&&t.success&&t.success(e)},error:function(e){var a=r.fireEvent("validateError",{validate:e});a&&t&&t.error&&t.error(e)}})},validateAll:function(e,t){var r=this;t="boolean"==typeof e?e:t?t:!1;var a=r.fireEvent("beforeValidateAll");a&&r._validator.validateAll(r,{success:function(t){var a=r.fireEvent("validateAllSuccess",{validates:t});a&&e&&e.success&&e.success(t)},error:function(t){var a=r.fireEvent("validateAllError",{validates:t});a&&e&&e.error&&e.error(t)}},t)},getValidateStatus:function(e){return this._validateInfo.hasOwnProperty(e)?this._validateInfo[e]:-1},setValidateSuccess:function(e){var t=this;t._validateInfo[e]=1,t._validateSuccess({field:e})},setValidateError:function(e,t,r){var a=this;a._validateInfo[e]=0,a._validateError({field:e,msg:t},r)},setGeneralError:function(e){this.getElement("error").innerHTML=e},clearGeneralError:function(){this.getElement("error").innerHTML=""},_isSupportPlaceholder:function(){return"placeholder"in document.createElement("input")},_getPlaceholder:function(e){for(var t=this,r={},a="",n={},i=0;i<e.length;i++)a=t.lang[e[i].placeholder],0!==+e[i].clearbtn&&(n[i]=f('<span id="'+t.$getId(e[i].label+"_clearbtn")+'" class="pass-clearbtn pass-clearbtn-'+e[i].label+'" style="display:none;"></span>'http://passport.baidu.com/passApi/js/),f(t.getElement(e[i].label)).after(n[i])),t._isSupportPlaceholder()&&!f.browser.ie?f(t.getElement(e[i].label)).attr({placeholder:a}):(r[i]=f('<span id="'+t.$getId(e[i].label+"_placeholder")+'" class="pass-placeholder pass-placeholder-'+e[i].label+'">'+a+"</span>"),f(t.getElement(e[i].label)).after(r[i])),t._rendEventPlaceholder(t.getElement(e[i].label),r[i],n[i])},_getCookie:function(e){var t,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(r))?unescape(t[2]):null},_logPass:function(e,t){function r(e){var t,r,a,n,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for(a=e.length,r=0,t="";a>r;){if(n=255&e.charCodeAt(r++),r===a){t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4),t+="==";break}if(i=e.charCodeAt(r++),r===a){t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4|(240&i)>>4),t+=s.charAt((15&i)<<2),t+="=";break}o=e.charCodeAt(r++),t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4|(240&i)>>4),t+=s.charAt((15&i)<<2|(192&o)>>6),t+=s.charAt(63&o)}return t}var a=document.location.protocol+"//nsclick.baidu.com/v.gif?pid=111&v="+(new Date).getTime(),n="";for(var i in t)n=n+i+":"+t[i]+",";n=r("{"+n.substring(0,n.length-1)+"}");for(var o in e)e.hasOwnProperty(o)&&(a+="&"+o+"="+e[o]);if(a+="&source=pc",a+="&auto_statistic="+n+"&auto_en="+t.eventType){var s=new Image;s.onload=s.onerror=function(){s.onload=s.onerror=null,s=null},s.src=a}},logClickLink:function(e,t){e=e||{},e=this.formatLogData(e);var r=t.target||t.srcElement,a=r&&r.getAttribute&&r.getAttribute("target"),n="_self"===a||null===a,i=this.makeImgSrc(e);if(n&&(t.preventDefault?t.preventDefault():t.returnValue=!1),window.navigator.sendBeacon&&n)window.navigator.sendBeacon(i),window.location.href=r.getAttribute("href");else if(n)this.lazyLog(r,i,null);else{var o=new Image;o.onload=o.onerror=function(){o.onload=o.onerror=null,o=null},o.src=i}},logCallBack:function(e,t){e=e||{},e=this.formatLogData(e);var r=this.makeImgSrc(e);this.lazyLog({},r,t)},formatLogData:function(e){var t=this.config||{};return f.extend({},{page:e.logPage||"",source:"pc-api",tpl:t.product||"",subpro:t.subpro||"",extrajson:t.extrajson||"",data_source:"fe"},e)},makeImgSrc:function(e){var t=document.location.protocol+"//nsclick.baidu.com/v.gif?pid=111&type=1023&v="+(new Date).getTime(),r="";for(var a in e)e.hasOwnProperty(a)&&(r+="en"!==a?"&"+a+"="+e[a]:"&auto_en="+e[a]);var n="{eventType:"+(e.en||"")+"}";return n=this.base64encode(n),t+="&auto_statistic="+n,t+="&auto_en="+(e.en||""),t+=r},lazyLog:function(e,t,r){function a(){r?r():window.location.href=n}var n=e.getAttribute&&e.getAttribute("href"),i=new Image,o=setTimeout(function(){i.onload=i.onerror=i=null,a("imgTimeout")},200);i.onload=i.onerror=function(){clearTimeout(o),i.onload=i.onerror=i=null,a("imgSuccess")},i.src=t},base64encode:function(e){var t,r,a,n,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(a=e.length,r=0,t="";a>r;){if(n=255&e.charCodeAt(r++),r===a){t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4),t+="==";break}if(i=e.charCodeAt(r++),r===a){t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4|(240&i)>>4),t+=s.charAt((15&i)<<2),t+="=";break}o=e.charCodeAt(r++),t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4|(240&i)>>4),t+=s.charAt((15&i)<<2|(192&o)>>6),t+=s.charAt(63&o)}return t},_rendEventPlaceholder:function(e,t,r){if(e||r){var a,n,i=this,o=function(e){1===+e?(t&&t[0]&&i.$hide(t[0]),r&&r[0]&&i.$show(r[0])):(t&&t[0]&&i.$show(t[0]),r&&r[0]&&i.$hide(r[0]))};setTimeout(function(){e&&e.value&&o(1)},200),f(t).on("mousedown",function(){n=!0,clearTimeout(a),a=setTimeout(function(){i.suggestionDom&&"none"!==i.suggestionDom.style.display||e.focus()},0)}),f(r).on("click",function(){e.value="",o(0),e.focus(),i.suggestionDom&&(i.suggestionDom.data_delete=!0,setTimeout(function(){i.suggestionDom.data_delete=!1},200))}),f(e).on("keyup",function(){o(e.value?1:0)}),f(e).on("focus",function(){window.inputCheckTimer=setInterval(function(){e.value.length?(o(1),clearInterval(window.inputCheckTimer)):o(0)},30)})}},SBCtoDBC:function(e){var t="";if(e){for(var r=e.length,a=0;r>a;a++){var n=e.charCodeAt(a);n=n>=65281&&65374>=n?n-65248:n,n=12288==n?32:n,t+=String.fromCharCode(n)}return t}},hide:function(){this.getElement().style.display="none"},show:function(){this.getElement().style.display="block"},_analysis:function(e,t){return window.passport.analysis&&window.passport.analysis[this.module]&&window.passport.analysis[this.module][e]?(window.passport.analysis[this.module][e](this,t),{preventDefault:!1,preventEvent:!1}):void 0},_hook:function(e,t){return window.passport.hook&&window.passport.hook[this.module]&&window.passport.hook[this.module][e]?window.passport.hook[this.module][e](this,t):{preventDefault:!1,preventEvent:!1}},fireEvent:function(e,t){var r=this._hook(e,t),a=!0;return r.preventEvent||(a=this.fire(e,t)),!r.preventDefault&&a},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?unescape(r[2]):""}});var m=0,h=8;return g.passport.bind=f.lang.createClass(function(e){var t=this;t.config={staticPage:"",product:"",charset:"",token:"",lang:"zh-CN"},f.extend(t.config,e),this.module="bind",t.constant={CONTAINER_CLASS:"tang-pass-bind",FOCUS_CLASS:"pass-text-input-focus",HOVER_CLASS:"pass-text-input-hover",ERROR_CLASS:"pass-text-input-error",DISABLED_CLASS:"pass-text-input-disabled",BIND_URL:"/v2/?bindwidget-XXX&tpl="+encodeURIComponent(t.config.product)+"&u="+encodeURIComponent(t.config.u)},t.lang={"zh-CN":{uName:"手机/邮箱",vCode:"验证码",bind:"确定",getVcodeText:"发送验证码",uNameError:"请填写正确的手机/邮箱",mailLengthError:"邮箱地址过长，请更换较短邮箱，总体不超过60个字符",matchGmailError:"gmail邮箱收信时会自动过滤用户名内的圆点,您可以去掉用户名内的圆点直接注册",emailLimitError:"不能使用该邮箱",keyResendTip:"重新发送",emailEmptyError:"您填写的邮箱格式有误，请重新输入",phoneEmptyError:"您填写的手机号格式有误，请输入11位大陆手机号"}}[t.config.lang],t.errMsg={1:{msg:"为了您的帐号安全，请登录后再绑定",field:""},2:{msg:"系统错误，请稍后再试",field:""},3:{msg:"验证码错误，请重新输入",field:"vCode"},4:{msg:"验证码错误，请重新输入",field:"vCode"},5:{msg:"验证码验证次数过多，请稍候再试",field:"vCode"},7:{msg:"该邮箱已被其他帐号绑定，请更换邮箱",field:"uName"},8:{msg:"该手机号已被其他帐号绑定，请更换手机号",field:"uName"},9:{msg:"您填写的邮箱格式有误，请重新输入",field:"uName"},10:{msg:"您填写的手机号格式有误，请输入11位大陆手机号",field:"uName"},11:{msg:"为了确保您能及时收到邮件，请使用主流邮箱注册",field:"uName"},110023:{msg:"该邮箱已被其他帐号绑定，请更换邮箱",field:"uName"},130036:{msg:"为了确保您能及时收到邮件，请使用<a href='http://www.baidu.com/search/passport_help.html#09' target='_blank'>主流邮箱</a>",field:"uName"},130020:{msg:"该手机号已被其他帐号绑定，请更换手机号",field:"uName"},500010:{msg:"系统错误，请稍后再试",field:"uName"},119998:{msg:"系统错误，请稍后再试",field:""}},t.initTime=(new Date).getTime(),u.data.setContext(f.extend({},t.config))},{type:"http://passport.baidu.com/passApi/js/magic.passport.bind",superClass:g.passport}).extend({_getIrregularField:function(e){var t=this,r={vCode:'<p id="'+t.$getId("vCodeWrapper")+'" class="pass-form-item pass-form-item-verifyCode"><label for="'+t.$getId("vCode")+'" id="'+t.$getId("vCodeLabel")+'" class="pass-label pass-label-vCode">'+t.lang.vCode+'</label><input id="'+t.$getId("vCode")+'" type="text" name="vCode" class="pass-text-input pass-text-input-verifyCode" autocomplete="off"/><input id="'+t.$getId("verifyCodeSend")+'" type="button" value="'+t.lang.getVcodeText+'" class="pass-button pass-button-verifyCodeSend" autocomplete="off"/><span id="'+t.$getId("verifyCodeSendTip")+'" class="pass-item-tip pass-item-tip-verifyCodeSend" style="display:none;"></span><span id="'+t.$getId("vCodeError")+'" class="pass-item-error pass-item-error-verifyCode"></span></p>',generalError:'<p id="'+t.$getId("errorWrapper")+'" class="pass-generalErrorWrapper"><span id="'+t.$getId("error")+'" class="pass-generalError"></span></p>',submit:'<p id="'+t.$getId("submitWrapper")+'" class="pass-form-item pass-form-item-submit"><input id="'+t.$getId("submit")+'" type="submit" value="'+t.lang.bind+'" class="pass-button pass-button-submit" /></p>'};return r[e]},_getTemplate:function(){var e=this,t='<form autocomplete="off" id="'+e.$getId("form")+'" method="POST">',r={action:"",u:e.config.u,authsid:"",bdstoken:"",staticPage:e.config.staticPage},a=[];a.push({field:"uName",label:e.lang.uName,hasSucc:!0}),t+=e._getIrregularField("generalError"),t+=e._getHiddenField(r);for(var n=0;n<a.length;n++)t+=e._getRegularField(a[n]);return t+=e._getIrregularField("vCode"),t+=e._getIrregularField("submit"),t+="</form>"},render:function(e){var t=this;t.getElement()||t.$mappingDom("",e||document.body);var r=f(t.getElement()),a=t._getTemplate();r.addClass(t.constant.CONTAINER_CLASS),r.append(f(a));var n=t.fireEvent("render");n&&(t._setData(),t._setValidator(),t._setEvent())},_setData:function(){var e=document.location.href,t=this,r={ppregtype:e.match(/[?&]ppregtype=([^&]*)/),authsid:e.match(/[?&]authsid=([^&]*)/),bdstoken:e.match(/[?&]pptoken=([^&]*)/)};f.each(r,function(e,r){r&&(t.constant.BIND_URL+="&"+e+"="+r[1])})},disableSmsButton:function(){var e,t=this,r=t.getElement("verifyCodeSend"),a=t.getElement("error"),n=r.value,i=60;f(r).addClass(t.constant.DISABLED_CLASS),r.disabled=!0,a.innerHTML="",f(t.getElement("vCodeError")).hide(),f(t.getElement("verifyCodeSendTip")).show().get(0).innerHTML="验证码已发送",e=setTimeout(function(){return 0===--i?(r.value=n,f(r).removeClass(t.constant.DISABLED_CLASS),r.disabled=!1,void(f(t.getElement("verifyCodeSendTip")).hide().get(0).innerHTML="")):void(r.value=t.lang.keyResendTip+"("+i+")")},1e3)},_setValidator:function(){var e=this,t=e.mainEmailSP=["http://passport.baidu.com/passApi/js/qq.com","http://passport.baidu.com/passApi/js/163.com","http://passport.baidu.com/passApi/js/126.com","http://passport.baidu.com/passApi/js/sohu.com","http://passport.baidu.com/passApi/js/sina.com","http://passport.baidu.com/passApi/js/21cn.com","http://passport.baidu.com/passApi/js/vip.qq.com","http://passport.baidu.com/passApi/js/yeah.net"],r=t.join(")|(\\@").replace(/\./g,"\\.");r="((\\@"+r+"))$",r="^([a-zA-Z0-9_\\.\\-\\+])+"+r,e._validator.addRule("mailLength",function(e){return String(e.value).length<=60}),e._validator.addMsg("mailLength",e.lang.mailLengthError),e._validator.addRule("emailLimit",function(e){return/([a-zA-Z0-9_\.\-\+])+\@(baidu|gmail|hotmail)\.com$/.test(e.value)?!1:!0}),e._validator.addMsg("emailLimit",e.lang.emailLimitError),e._validator.addRule("accountMerge",function(e){var t=e.value;return/^(([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+)|(1[3456789]\d{9})$/.test(t)?!0:!1}),e._validator.addMsg("accountMerge",e.lang.accountMergeError),e._validator.addRule("uName",function(e){return/^(([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+)|(1[3456789]\d{9})$/.test(e.value)?!0:!1}),e._validator.addMsg("uName",e.lang.uNameError),e.validateRules={uName:{rules:["required","uName"],desc:e.lang.uName},vCode:{rules:["required"],desc:e.lang.vCode}},e._validator.init(e,e.validateRules),e._validator.builtInMsg.email=e.lang.emailEmptyError,e._validator.builtInMsg.phone=e.lang.phoneEmptyError},_validateError:function(e,t){var r=this,a=f(r.getElement(e.field));a.addClass(r.constant.ERROR_CLASS),f(r.getElement(e.field+"Succ")).hide(),f(r.getElement(e.field+"Error")).show().get(0).innerHTML=e.msg,"vCode"==e.field&&(f(r.getElement("verifyCodeSendTip")).hide().get(0).innerHTML=""),t&&t.callback&&callback()},_validateSuccess:function(e,t){var r=this,a=f(r.getElement(e.field));f(r.getElement(e.field+"Error")).hide(),f(r.getElement(e.field+"Succ")).show(),a.removeClass(r.constant.ERROR_CLASS),"vCode"==e.field&&(f(r.getElement("verifyCodeSendTip")).hide().get(0).innerHTML=""),t&&t.callback&&callback()},_asyncValidate:{checkEmail:function(t){var r=this,a=r.getElement("uName"),n=e(a.value+"Moonshadow");n=n.replace(/o/,"ow").replace(/d/,"do").replace(/a/,"ad"),n=n.replace(/h/,"ha").replace(/s/,"sh").replace(/n/,"ns").replace(/m/,"mo"),u.data.checkMail({email:a.value,moonshad:n}).success(function(e){var a=r.fireEvent("emailCheck",{rsp:e});a&&(0==e.errInfo.no?t&&t.success(e):(r.errMsg[e.errInfo.no]&&(e.errInfo.msg=r.errMsg[e.errInfo.no].msg),e.msg=e.errInfo.msg,t&&t.error(e)))})},phoneCheck:function(t){var r=this,a=this.getElement("uName"),n=e(a.value+"Moonshadow");n=n.replace(/o/,"ow").replace(/d/,"do").replace(/a/,"ad"),n=n.replace(/h/,"ha").replace(/s/,"sh").replace(/n/,"ns").replace(/m/,"mo"),u.data.checkPhone({phone:a.value,moonshad:n}).success(function(e){var a=r.fireEvent("phoneCheck",{rsp:e});a&&(0==e.errInfo.no?t&&t.success(e):(r.errMsg[e.errInfo.no]&&(e.errInfo.msg=r.errMsg[e.errInfo.no].msg),e.msg=e.errInfo.msg,t&&t.error(e)))})}},_eventHandler:function(){var e,t={focus:function(){var t=e.fireEvent("fieldFocus",{ele:this});t&&(this.addClass(e.constant.FOCUS_CLASS),this.removeClass(e.constant.ERROR_CLASS))},blur:function(){var t=e.fireEvent("fieldBlur",{ele:this});t&&this.removeClass(e.constant.FOCUS_CLASS)},mouseover:function(){var t=e.fireEvent("fieldMouseover",{ele:this});t&&this.addClass(e.constant.HOVER_CLASS)},mouseout:function(){var t=e.fireEvent("fieldMouseout",{ele:this});t&&this.removeClass(e.constant.HOVER_CLASS)}},r={focus:{},blur:{uName:function(t){var r=e.getElement(t);if(/\S+/.test(r.value))if(/^\d+$/.test(r.value))e._validator.confStorage[e.$getId()][t]={rules:["required","phone"],asyncRule:e._asyncValidate.phoneCheck,desc:e.lang.uName};else if(r.value.indexOf("@")>-1){if(e.suggestionHighlight)return;e._validator.confStorage[e.$getId()][t]={rules:["required","mailLength","email","emailLimit"],asyncRule:e._asyncValidate.checkEmail,desc:e.lang.uName}}else e._validator.confStorage[e.$getId()][t]={rules:["uName"],desc:e.lang.uName};else e._validator.confStorage[e.$getId()][t]={rules:["required"],desc:e.lang.uName};e.validate(t)},vCode:function(t){e.validate(t)}},change:{},click:{verifyCodeSend:function(){var t=e.getElement("uName").value;e.validate("uName",{success:function(){var r=e.constant.BIND_URL.replace("XXX","send");r+=/^1[3456789]\d{9}$/.test(t)?"&action=quickreg_bindmobile&mobile="+t:"&action=quickreg_bindemail&email="+t,u.data.jsonp(r).success(function(t){var r=e.fireEvent("smsCodeSend",{rsp:t});r&&(e.setGeneralError(""),0==t.data.errno?e.disableSmsButton():(4==t.data.errno?e.setValidateError("vCode","系统错误，请稍后再试"):5==t.data.errno?e.setValidateError("vCode","验证码发送次数过多，请稍后再试"):e.errMsg[t.data.errno]?e.errMsg[t.data.errno].field?e.setValidateError(e.errMsg[t.data.errno].field,e.errMsg[t.data.errno].msg):e.setGeneralError(e.errMsg[t.data.errno].msg):e.getElement("error").innerHTML=t.data.errmsg,f(e.getElement("verifyCodeSendTip")).hide().get(0).innerHTML=""))})}})}},submit:function(t){e.validateAll({success:function(){e.getElement("submit").focus();var t=e.fireEvent("beforeSubmit");if(t){var r=f.form.json(e.getElement("form"));r.timeSpan=(new Date).getTime()-e.initTime;var a=function(t){if(0==t.data.errno){var r=e.fireEvent("bindSuccess",{rsp:t});if(!r)return;window.location.href=e.config.u}else{var r=e.fireEvent("bindError",{rsp:t});if(!r)return;e.setGeneralError(""),e.errMsg[t.data.errno]?e.errMsg[t.data.errno].field?e.setValidateError(e.errMsg[t.data.errno].field,e.errMsg[t.data.errno].msg):e.setGeneralError(e.errMsg[t.data.errno].msg):e.setGeneralError(t.data.errmsg),f(e.getElement("verifyCodeSendTip")).hide().get(0).innerHTML=""}},n=e.constant.BIND_URL.replace("XXX","bind");/^1[3456789]\d{9}$/.test(r.uName)?n+="&action=quickreg_bindmobile&vcode="+r.vCode+"&mobile="+r.uName:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r.uName)&&(n+="&action=quickreg_bindemail&vcode="+r.vCode+"&email="+r.uName),u.data.jsonp(n).success(a)}},error:function(){}}),t.preventDefault()}};return{entrance:function(a){e=this;var n=(f(a.target),a.target.name);if(!n&&a.target.id){var i=a.target.id.match(/\d+__(.*)$/);i&&(n=i[1])}n&&(t.hasOwnProperty(a.type)&&t[a.type].apply(f(a.target),[n,a]),r.hasOwnProperty(a.type)&&("function"==typeof r[a.type]&&r[a.type].apply(f(a.target),[a]),r[a.type].hasOwnProperty(n)&&r[a.type][n].apply(f(a.target),[n,a])))}}}(),$dispose:function(){var e=this;e.disposed||(f.dom(e.getElement()).removeClass(e.constant.CONTAINER_CLASS),f.dom(e.getElement("form")).remove(),g.Base.prototype.$dispose.call(e))}}),g});