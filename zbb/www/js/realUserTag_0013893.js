passport._define("realUserTag-1.js"/*tpa=http://passport.baidu.com/passApi/js/realUserTag.js*/,function(){var e=e||window.passport||{},t=e.tangramInst||t||window.baidu;!function(e){e.apiDomain={staticDomain:window.location?"http:"==window.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com":"http:"==document.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com"}}(e);var n=null;if("function"!=typeof n)var n=function(){};n._baiduInstName=n._baiduInstName||"bdInst_"+(new Date).getTime();var r=r||t.baiduInstance||window.baiduInstance;window[n._baiduInstName]=window[n._baiduInstName]||r,n.resourcePath="",n.skinName="default",n.version="1.0.0.0",/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",!1,!0),t.form=t.form||{},t.url=t.url||{},t.url.escapeSymbol=t.url.escapeSymbol||function(e){return String(e).replace(/[#%&+=\/\\\ \　\f\r\n\t]/g,function(e){return"%"+(256+e.charCodeAt()).toString(16).substring(1).toUpperCase()})},t.form.json=t.form.json||function(e,n){function r(e,t){var n=f[e];n?(n.push||(f[e]=[n]),f[e].push(t)):f[e]=t}for(var i,a,o,s,u,c,l,p,d=e.elements,n=n||function(e){return e},f={},m=0,g=d.length;g>m;m++)if(i=d[m],o=i.name,!i.disabled&&o)switch(a=i.type,s=t.url.escapeSymbol(i.value),a){case"radio":case"checkbox":i.checked&&r(o,n(s,o));break;case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":r(o,n(s,o));break;case"select-multiple":for(u=i.options,l=u.length,c=0;l>c;c++)p=u[c],p.selected&&r(o,n(p.value,o))}return f},n.Base=function(){t.lang.Class.call(this),this._ids={},this._eid=this.guid+"__"},t.lang.inherits(n.Base,t.lang.Class,"http://passport.baidu.com/passApi/js/magic.Base").extend({getElement:function(e){return document.getElementById(this.$getId(e))},getElements:function(){var e={},t=this._ids;for(var n in t)e[n]=this.getElement(n);return e},$getId:function(e){return e=t.lang.isString(e)?e:"",this._ids[e]||(this._ids[e]=this._eid+e)},$mappingDom:function(e,n){return t.lang.isString(n)?this._ids[e]=n:n&&n.nodeType&&(n.id?this._ids[e]=n.id:n.id=this.$getId(e)),this},$hide:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="none",e.style.visibility="hidden"),this},$show:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="block",e.style.visibility="visible",e.style.opacity="1"),this},$dispose:function(){this.fire("ondispose")&&t.lang.Class.prototype.dispose.call(this)}}),n.control=n.control||{},function(){function e(e,t){var n,r=e.getAttribute(t),a=!1;if(r&&(n=r.match(i[0]))){a={};for(var o,s=0;s<n.length;s++)o=n[s].match(i[1]),!isNaN(o[2])&&(o[2]=+o[2]),i[2].test(o[2])&&(o[2]=o[2].replace(i[3],"$2")),i[4].test(o[2])&&(o[2]=i[5].test(o[2])),a[o[1]]=o[2]}return a}function r(r,i){var a=e(r,"tang-event");if(a)for(var o in a){var s=a[o].substr(1);s.indexOf("(")<0&&(s+="()"),t.dom(r).on(o,new Function(n._baiduInstName+"('"+i+"') && "+n._baiduInstName+"('"+i+"')"+s))}}n.setup=n.setup||function(t,n,i){var a=e(t,"tang-param")||{};for(var o in i)a[o]=i[o];var s=new n(a);s.$mappingDom("",t),r(t,s.guid);for(var u=t.getElementsByTagName("*"),o=u.length-1;o>=0;o--)r(u[o],s.guid);return s};var i=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i]}(),n.passport=t.lang.createClass(function(){},{type:"magic.passport",superClass:n.Base}).extend({});var e=e||window.passport||{};return e.realUserTag=e.realUserTag||{},e.realUserTag.data=e.realUserTag.data||{},function(e){function n(e){this._requests=[],this._value=null,this._exception=null,this._isComplete=!1;var t=this;e(function(e){t._fulfillPromise(e)},function(e){t._breakPromise(e)})}function r(e,t,n){return t?n?function(n){return n=n||{},l.submit(m+t,i(n,e,_paramNameMapping[e],_paramValueMapping[e],!0),{charset:"utf-8",processData:function(t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r&&(t[n]=decodeURIComponent(r))}return a(e,t)}})}:function(n){return l.jsonp(m+t,i(n,e,_paramNameMapping[e],_paramValueMapping[e],!1),{charset:"utf-8",processData:function(t){return a(e,t)}})}:u}function i(e,t,n,r,i){var a=i?{staticpage:f.staticPage,charset:f.charset||document.characterSet||document.charset||""}:{},o=_paramDefaultValue[t];if(o)for(var s in o){if(o.hasOwnProperty(s)){var u=o[s];a[s]="function"==typeof u?u(e):u}"verifypass"==s&&(a[s]=decodeURIComponent(a[s]))}if(a.token=f.token,a.tpl=f.product,a.apiver="v3",a.tt=(new Date).getTime(),e){n=n||{},r=r||{};for(var s in e)if(e.hasOwnProperty(s)){var l=r[s],p=l?l(e[s],e):e[s];"string"==typeof p&&(i&&(p=decodeURIComponent(p)),_paramSpaceIgnoreList[s]||(p=c.trim(p))),a[n[s]||s.toLowerCase()]=p}}return a}function a(e,t){if(t){var n=_resultProcessFunc[e];n&&n(t);var r=t.errInfo,i=t,a=i;return r?i.errInfo=o(e,r,i):(r={no:t.err_no,msg:t.err_msg||""},delete i.err_no,delete i.err_msg,a={data:i,errInfo:o(e,r,i)}),a}return t}function o(e,t,n){var r=_errMsg[_errInfoFieldMapping[e]||e];if(r&&t&&0!=t.no){var i=r[t.no]||r[-1];if(i){var a=i.msg;if(a&&a.indexOf("#{")>=0)if("login"==e&&110024==t.no){var o=m+"/v2/?regnotify&needresend=true&tpl="+encodeURIComponent(f.product)+"&user="+encodeURIComponent(n.mail)+"&u="+encodeURIComponent(n.u);a=c.format(a,{gotourl:o})}else a=c.format(a,n||{});t.msg=a,t.field=i.field}}return t}function s(e){if(e){var t=e.errInfo,n=e;if(!t)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];i&&(e[r]=decodeURIComponent(i))}t||(t={no:e.err_no,msg:e.err_msg||""},delete n.err_no,delete n.err_msg,e={data:n,errInfo:t})}return e}var u=function(){};n.prototype={get_isComplete:function(){return this._isComplete},get_value:function(){if(!this._isComplete)return void 0;if(this._exception)throw this._exception;return this._value},call:function(e){for(var t=[],n=0,r=arguments.length-1;r>n;n++)t[n]=arguments[n+1];return this.when(function(n){return n[e].apply(n,t)})},getValue:function(e){return this.when(function(t){return t[e]})},setValue:function(e,t){this.whenOnly(function(n){n[e]=t})},when:function(e,t,r){return n.when(this,e,t,r)},whenOnly:function(e,t,r){n.whenOnly(this,e,t,r)},success:function(e,t){return this.when(e,u,t)},fail:function(e,t){return this.when(u,e,t)},_enqueueOne:function(e){this._isComplete?this._notify(e):this._requests.push(e)},_notify:function(e){this._exception?e.breakPromise&&e.breakPromise(this._exception):e.fulfillPromise&&e.fulfillPromise(this._value)},_notifyAll:function(){for(var e=0,t=this._requests.length;t>e;e++)this._notify(this._requests[e])},_fulfillPromise:function(e){this._value=e,this._exception=null,this._isComplete=!0,this._notifyAll()},_breakPromise:function(e){this._value=null,this._exception=e||new Error("An error occured"),this._isComplete=!0,this._notifyAll()}},n.when=function(e,t,r,i){return new n(function(a,o){n.make(e)._enqueueOne({fulfillPromise:function(e){a(t?t.call(i,e):e)},breakPromise:function(e){if(r)try{a(r.call(i,e))}catch(t){o(t)}else o(e)}})})},n.whenOnly=function(e,t,r,i){n.make(e)._enqueueOne({fulfillPromise:function(e){t&&t.call(i,e)},breakPromise:function(e){r&&r.call(i,e)}})},n.make=function(e){return e instanceof n?e:n.immediate(e)},n.immediate=function(e){return new n(function(t){t(e)})};var c={};!function(n){var r=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");n.trim=function(e){return String(e).replace(r,"")},n.getUniqueId=function(e){return e+Math.floor(2147483648*Math.random()).toString(36)},n.g=function(e){return e?"string"==typeof e||e instanceof String?document.getElementById(e):!e.nodeName||1!=e.nodeType&&9!=e.nodeType?null:e:null},n.getParent=function(e){return e=n.g(e),e.parentElement||e.parentNode||null},n.encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},n.array=n.array||{},n.array.indexOf=function(e,t,n){var r=e.length;for(n=0|n,0>n&&(n=Math.max(0,r+n));r>n;n++)if(n in e&&e[n]===t)return n;return-1},n.array.contains=function(e,n){return t.array.indexOf(e,n)>=0},n.browser=n.browser||{},n.browser.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,n.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,n.insertHTML=function(e,t,r){e=n.g(e);var i,a;return e.insertAdjacentHTML&&!n.browser.opera?e.insertAdjacentHTML(t,r):(i=e.ownerDocument.createRange(),t=t.toUpperCase(),"AFTERBEGIN"==t||"BEFOREEND"==t?(i.selectNodeContents(e),i.collapse("AFTERBEGIN"==t)):(a="BEFOREBEGIN"==t,i[a?"setStartBefore":"setEndAfter"](e),i.collapse(a)),i.insertNode(i.createContextualFragment(r))),e},n.format=function(e,t){e=String(e);var n=Array.prototype.slice.call(arguments,1),r=Object.prototype.toString;return n.length?(n=1==n.length&&null!==t&&/\[object Array\]|\[object Object\]/.test(r.call(t))?t:n,e.replace(/#\{(.+?)\}/g,function(e,t){var i=n[t];return"[object Function]"==r.call(i)&&(i=i(t)),"undefined"==typeof i?"":i})):e},n.on=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},n.off=function(e,t){e.removeEventListener?e.removeEventListener(t,func,!1):e.detachEvent?e.detachEvent("on"+t,func):e["on"+t]=null},n.addClass=function(t,n){element=e.base.g(t);for(var r=n.split(/\s+/),i=element.className,a=" "+i+" ",o=0,s=r.length;s>o;o++)a.indexOf(" "+r[o]+" ")<0&&(i+=(i?" ":"")+r[o]);return element.className=i,element},n.removeClass=function(t,n){element=e.base.g(t);for(var r,i,a=element.className.split(/\s+/),o=n.split(/\s+/),s=o.length,u=0;s>u;++u)for(i=0,r=a.length;r>i;++i)if(a[i]==o[u]){a.splice(i,1);break}return element.className=a.join(" "),element},n.getViewHeight=function(){var e=document,t=n.browser.ie||1,r="BackCompat"===e.compatMode&&9>t?e.body:e.documentElement;return r.clientHeight},n.getViewWidth=function(){var e=document,t="BackCompat"==e.compatMode?e.body:e.documentElement;return t.clientWidth}}(c),e.base=c;var l={};!function(e){var t="__bdpp_pstc__"+(new Date).getTime(),r=t+"_form",i=t+"_ifr",a=function(e){if("object"==typeof e){var t=[];for(var n in e){var r=e[n];if(void 0!==r&&null!==r){t.length&&t.push("&");var i=encodeURIComponent("boolean"==typeof r?r?"1":"0":r.toString());t.push(encodeURIComponent(n),"=",i)}}return t.join("")}return"string"==typeof e?e:null},o=function(e,t){if(t=a(t),"string"==typeof t){var n=/\?/g.test(e);e+=(n?"&":"?")+a(t)}return e},s=function(e,t,n){e.setAttribute("type","text/javascript"),n&&e.setAttribute("charset",n),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)},u=function(e){if(e.clearAttributes)e.clearAttributes();else for(var t in e)e.hasOwnProperty(t)&&delete e[t];e&&e.parentNode&&e.parentNode.removeChild(e),e=null},l=function(e,t,n){function r(e){return function(){try{e?p.onfailure&&p.onfailure():(t.apply(window,arguments),clearTimeout(a)),window[i]=null,delete window[i]}catch(n){}finally{u(o)}}}var i,a,o=document.createElement("SCRIPT"),l="bd__cbs__",p=n||{},d=p.charset,f=p.queryField||"callback",m=p.timeOut||0,g=new RegExp("(\\?|&)"+f+"=([^&]*)");i=c.getUniqueId(l),window[i]=r(0),m&&(a=setTimeout(r(1),m)),e=e.replace(g,"$1"+f+"="+i),e.search(g)<0&&(e+=(e.indexOf("?")<0?"?":"&")+f+"="+i),s(o,e,d)},p=function(e,t){var n=[];n.push("<form id='",r,"' target='",i,"' "),n.push("action='",c.encodeHTML(e),"' method='post'>");for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];if(void 0!==o&&null!==o){var s=c.encodeHTML("boolean"==typeof o?o?"1":"0":o);n.push("<input type='hidden' name='",c.encodeHTML(a),"' value='",s,"' />")}}return n.push("</form>"),n.join("")},d=function(e,n,a,o){function s(e){return function(){try{e?o.onfailure&&o.onfailure():(a.apply(window,arguments),l&&clearTimeout(l)),window[d]=null,delete window[d]}catch(t){}}}o=o||{};var u=o.timeOut||0,l=!1,d=c.getUniqueId("bd__pcbs__");n[o.queryField||"callback"]="parent."+d;var f=p(e,n);if(c.g(r))c.getParent(r).innerHTML=f;else{var m=[];m.push("<div id='",t,"' style='display:none;'>"),m.push("<div>",f,"</div>"),m.push("<iframe name='",i,"' src='"+("https:"==window.location.protocol.toLowerCase()?"https://passport.baidu.com/passApi/html/_blank.html":"about:blank")+"' style='display:none;'></iframe>"),m.push("</div>"),c.insertHTML(document.body,"beforeEnd",m.join(""))}window[d]=s(),u&&(l=setTimeout(s(1),u)),c.g(r).submit()};e.jsonp=function(e,t,r){return r=r||{},new n(function(n,i){e=o(e,t),l(e,function(e){r.processData&&(e=r.processData(e)),n&&n(e)},{charset:r.charset,queryField:r.queryField,timeOut:r.timeOut,onfailure:function(){i&&i()}})})},e.submit=function(e,t,r){return e&&t?new n(function(n){d(e,t,function(e){r.processData&&(e=r.processData(e)),n&&n(e)},r)}):void 0};var f=[];e.load=function(e){return new n(function(t){var n=f.push(new Image)-1,r=!1,i=setTimeout(function(){r=!0,t&&t()},1e3);f[n].onload=function(){clearTimeout(i),r||t&&t(),r=!0,f[n]=f[n].onload=null},f[n].src=e})}}(l),e.setContext=function(e){f.product=e.product||f.product,f.charset=e.charset||f.charset,f.staticPage=e.staticPage||f.staticPage,f.token=e.token||f.token};var p={},d={},f={},m="https://passport.baidu.com";for(var g in p)p.hasOwnProperty(g)&&(e[g]=r(g,p[g]));for(var g in d)d.hasOwnProperty(g)&&(e[g]=r(g,d[g],!0));e.jsonp=function(e,t){return 0!=e.indexOf("http")&&(e=m+e),t=t||{},t.apiver="v3",t.tt=(new Date).getTime(),l.jsonp(e,t,{charset:"utf-8",processData:function(e){return s(e)}})},e.request=l}(e.realUserTag.data),n.passport.realUserTag=t.lang.createClass(function(e){function n(){if(e&&e.guid);else if(e)e.guid="$BAIDU$";else{var e={};e.guid="$BAIDU$"}return window[e.guid]=window[e.guid]||{},window[e.guid]._counter=window[e.guid]._counter||"1","TANGRAM__"+window[e.guid]._counter++}var r=this;r.config={product:"",charset:"",staticPage:"",u:"",height:"314",width:"455",lang:"zh-CN",title:"百度帐号消息"},t.extend(r.config,e),this.module="qrcoe",r.usermsg={},r.url={REQUEST:"https://passport.baidu.com/v2/api/checkfacticity",ADDCOOKIE:"https://passport.baidu.com/v2/?ucentersetcookie",BIND:"http://passport.baidu.com/v2/accountsecurity",FEEDBACK:"http://passport.baidu.com/v2/?ucenterfeedback&tpl="+r.config.product+"#login"},r.constant={CONTAINER_CLASS:"tang-pass-realusertag",FOCUS_CLASS:"pass-input-focus",HOVER_CLASS:"pass-input-hover",ERROR_CLASS:"pass-input-error",HOVER_CLASS_SUBMIT:"pass-button-submit-hover",PRESS_CLASS_SUBMIT:"pass-button-submit-press"},r.lang={"zh-CN":{nextStep:"下一步",firstStepText:e.firstStepText||"一扫即上，获取二维码扫描登录，为确保是您本人操作，请输入密码:",secondStepText:e.secondStepText||"一扫即上，扫描二维码扫描即可登录"}}[r.config.lang],r._ids=n(),r._initApi()},{type:"magic.passport.realUserTag",superClass:n.passport}).extend({_loadCss:function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,t.disabled=!1,document.getElementsByTagName("head")[0].appendChild(t)},_checkuser:function(t,n){var r=this,i=e.realUserTag.data.request.jsonp,a=r.url.REQUEST;"close"==n?(i(a,{act:"close"},{processData:function(){}}),t()):i(a,{},{processData:function(e){if("110000"!=e.errno)return!0;if("object"!=(typeof e).toLowerCase()||!e.username||e.facticity_hide_notice||e.facticity){if("object"!=(typeof e).toLowerCase()||e.facticity_hide_notice||!e.display)return!0;r.usermsg.facticity=!0,r.usermsg.username=e.username,r.usermsg.msg="<p>使用手机/邮箱登录，随时随地掌握帐号信息，确保安全</p><p>您的手机：<span>"+(e.mobile||"您没有绑定密保邮箱")+"</span></p><p>您的密保邮箱：<span>"+(e.email||"您没有绑定手机")+"</span></p>",t()}else r.usermsg.facticity=!1,r.usermsg.username=e.username,r.usermsg.msg="<p>小伙伴们都绑定手机/邮箱啦，再不绑定你就OUT了！</p>",t()}})},_getTemplate:function(t){var n=(e.realUserTag.data.base,this._ids),r=this.config,i=this.usermsg,a=this.url,o={wrapper:"<div id="+n+'__wrapper class="realusertag-wrapper" style="width:'+r.width+"px;height:"+r.height+'px"><div id='+n+'__content class="realusertag-content"><div id='+n+'__top class="realusertag-top"><h3 class="top-title">'+r.title+"</h3><a id="+n+'__top_close class="top-close"></a></div><div id='+n+'__article class="realusertag-article"><div class="article-msg"><p class="article-msg-title">亲爱的'+i.username+'：</p><div class="article-msg-content">'+i.msg+"</div></div><div id="+n+'__bindbutton class="article-bindbutton '+(i.facticity?"real":"unreal")+'"><div class="bindbutton-wrapper"><a href="'+a.BIND+'" target="_blank" class="bindbutton-a" id="'+n+(i.facticity?"__realbtn":"__unrealbtn")+'">'+(i.facticity?"下次启用手机/邮箱登录":"快速绑定")+"</a></div></div><div id="+n+'__result class="article-result"><div id='+n+'__result_title class="result-title"></div><div id='+n+'__result_msg class="result-msg"></div></div></div><div id='+n+'__footer class="realusertag-footer"><p class="footer-left">感谢您的支持!</p><a class="footer-right" href="'+a.FEEDBACK+'" target="_blank">帮助中心</a></div></div></div>'};return o[t]},_initApi:function(){var n=this;e.realUserTag.data,n._checkuser(function(){var e="https://passport.baidu.com";n._loadCss(e+"/passApi/css/uni_realusertag_9c3bf1f.css"),document.body.appendChild(t(n._getTemplate("wrapper")).get(0)),n.addEvent()})},addEvent:function(){var t=this,n=e.realUserTag.data.base,r=this.getElement("top_close"),i=this.getElement("realbtn"),a=this.getElement("wrapper");n.on(r,"click",function(){t._checkuser(function(){a.style.display="none"},"close")}),i&&n.on(i,"click",function(n){n&&n.preventDefault?n.preventDefault():window.event.returnValue=!1;var r=e.realUserTag.data.request.jsonp;r(t.url.ADDCOOKIE,{},{processData:function(){i.innerHTML="启用成功!"}}),setTimeout(function(){t.hide()},2e3),i.innerHTML="正在启用，请稍后…"}),n.browser.ie<7&&(window.onScroll=function(){t.getElement("wrapper").style.display="none",document.body.scrollTop&&(t.getElement("wrapper").style.top=document.body.scrollTop+document.body.clientHeight-t.config.height-4+"px"),t.getElement("wrapper").style.display=""})},hide:function(){this.getElement("wrapper").style.display="none"},getElement:function(e){return document.getElementById(this._ids+"__"+e)}}),n});