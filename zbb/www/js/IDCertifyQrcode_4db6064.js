passport._define("IDCertifyQrcode-2.js"/*tpa=http://passport.baidu.com/passApi/js/IDCertifyQrcode.js*/,function(){function _(e){alert("undefined:"+e)}var passport=passport||window.passport||{},baidu=passport.tangramInst||baidu||window.baidu;!function(e){e.apiDomain={staticDomain:window.location?"http:"==window.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com":"http:"==document.location.protocol.toLowerCase()?"http://passport.bdimg.com/":"https://passport.baidu.com"}}(passport);var magic=null;if("function"!=typeof magic)var magic=function(){};magic._baiduInstName=magic._baiduInstName||"bdInst_"+(new Date).getTime();var baiduInstance=baiduInstance||baidu.baiduInstance||window.baiduInstance;window[magic._baiduInstName]=window[magic._baiduInstName]||baiduInstance,magic.resourcePath="",magic.skinName="default",magic.version="1.0.0.0",/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",!1,!0),baidu.form=baidu.form||{},baidu.url=baidu.url||{},baidu.url.escapeSymbol=baidu.url.escapeSymbol||function(e){return String(e).replace(/[#%&+=\/\\\ \　\f\r\n\t]/g,function(e){return"%"+(256+e.charCodeAt()).toString(16).substring(1).toUpperCase()})},baidu.form.json=baidu.form.json||function(e,t){function r(e,t){var r=f[e];r?(r.push||(f[e]=[r]),f[e].push(t)):f[e]=t}for(var n,i,a,o,s,c,d,u,l=e.elements,t=t||function(e){return e},f={},p=0,g=l.length;g>p;p++)if(n=l[p],a=n.name,!n.disabled&&a)switch(i=n.type,o=baidu.url.escapeSymbol(n.value),i){case"radio":case"checkbox":n.checked&&r(a,t(o,a));break;case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":r(a,t(o,a));break;case"select-multiple":for(s=n.options,d=s.length,c=0;d>c;c++)u=s[c],u.selected&&r(a,t(u.value,a))}return f},magic.Base=function(){baidu.lang.Class.call(this),this._ids={},this._eid=this.guid+"__"},baidu.lang.inherits(magic.Base,baidu.lang.Class,"http://passport.baidu.com/passApi/js/magic.Base").extend({getElement:function(e){return document.getElementById(this.$getId(e))},getElements:function(){var e={},t=this._ids;for(var r in t)e[r]=this.getElement(r);return e},$getId:function(e){return e=baidu.lang.isString(e)?e:"",this._ids[e]||(this._ids[e]=this._eid+e)},$mappingDom:function(e,t){return baidu.lang.isString(t)?this._ids[e]=t:t&&t.nodeType&&(t.id?this._ids[e]=t.id:t.id=this.$getId(e)),this},$hide:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="none",e.style.visibility="hidden"),this},$show:function(e){return("string"==(typeof e).toLowerCase()||""===e)&&(e=this.getElement(e)),e&&e.style&&(e.style.display="block",e.style.visibility="visible",e.style.opacity="1"),this},$dispose:function(){this.fire("ondispose")&&baidu.lang.Class.prototype.dispose.call(this)}}),magic.control=magic.control||{},function(){function e(e,t){var n,i=e.getAttribute(t),a=!1;if(i&&(n=i.match(r[0]))){a={};for(var o,s=0;s<n.length;s++)o=n[s].match(r[1]),!isNaN(o[2])&&(o[2]=+o[2]),r[2].test(o[2])&&(o[2]=o[2].replace(r[3],"$2")),r[4].test(o[2])&&(o[2]=r[5].test(o[2])),a[o[1]]=o[2]}return a}function t(t,r){var n=e(t,"tang-event");if(n)for(var i in n){var a=n[i].substr(1);a.indexOf("(")<0&&(a+="()"),baidu.dom(t).on(i,new Function(magic._baiduInstName+"('"+r+"') && "+magic._baiduInstName+"('"+r+"')"+a))}}magic.setup=magic.setup||function(r,n,i){var a=e(r,"tang-param")||{};for(var o in i)a[o]=i[o];var s=new n(a);s.$mappingDom("",r),t(r,s.guid);for(var c=r.getElementsByTagName("*"),o=c.length-1;o>=0;o--)t(c[o],s.guid);return s};var r=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i]}();var passport=passport||window.passport||{};passport.err=passport.err||{},function(e){var t=null;t="function"===(typeof e.getCurrent).toLowerCase()?e.getCurrent():{errMsg:{},labelText:{}},t.errMsg.IDCertifyQrcode={},t.labelText.IDCertifyQrcode={IDCertifyQrcodeAppHref:"http://xbox.m.baidu.com/mo/",IDCertifyQrcodeAppName:"百度App",IDCertifyQrcodeMsg:'请使用<a href="#{IDCertifyQrcodeAppHref}" target="_blank">#{IDCertifyQrcodeAppName}</a>扫码完成刷脸验证',IDCertifyQrcodeSuccessTit:"扫描成功",IDCertifyQrcodeSuccessMsg:"请在手机端完成刷脸验证",IDCertifyQrcodeErrorTit:"网络链接失败",IDCertifyQrcodeErrorMsg:"请稍候再试",IDCertifyQrcodeRefreshTit:"二维码已失效",IDCertifyQrcodeRefreshBtn:"刷新二维码"},e.getCurrent=function(){return t}}(passport.err);var passport=passport||window.passport||{};return passport.data=passport.data||{},function(e){function t(e){this._requests=[],this._value=null,this._exception=null,this._isComplete=!1;var t=this;e(function(e){t._fulfillPromise(e)},function(e){t._breakPromise(e)})}function r(e,t,r){return t?r?function(r){return r=r||{},d.submit(u+t,n(r,e,p[e],g[e],!0),{charset:"utf-8",processData:function(t){if(t)for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];n&&(t[r]=decodeURIComponent(n))}return i(e,t)}})}:function(r){return d.jsonp(u+t,n(r,e,p[e],g[e],!1),{charset:"utf-8",processData:function(t){return i(e,t)}})}:s}function n(e,t,r,n,i){var a=i?{staticpage:b.staticPage,charset:b.charset||document.characterSet||document.charset||""}:{},o=m[t];if(o)for(var s in o){if(o.hasOwnProperty(s)){var d=o[s];a[s]="function"==typeof d?d(e):d}"verifypass"==s&&(a[s]=decodeURIComponent(a[s]))}if(a.token=b.token,a.tpl=b.product||"",a.subpro=b.subpro,a.apiver="v3",a.tt=(new Date).getTime(),e){r=r||{},n=n||{};for(var s in e)if(e.hasOwnProperty(s)){var u=n[s],l=u?u(e[s],e):e[s];"string"==typeof l&&(i&&(l=decodeURIComponent(l)),h[s]||(l=c.trim(l))),a[r[s]||s.toLowerCase()]=l}}return a}function i(t,r){if(e&&e.traceID&&e.traceID.getTraceID&&e.traceID.getTraceID(r),r){var n=v[t];n&&n(r);var i=r.errInfo,o=r,s=o;return i?o.errInfo=a(t,i,o):(i={no:r.err_no,msg:r.err_msg||""},delete o.err_no,delete o.err_msg,s={data:o,errInfo:a(t,i,o)}),s}return r}function a(e,t){var r=I[y[e]||e];if(r&&t&&0!=t.no){var n=r[t.no]||r[-1];if(n){var i=n.msg;t.msg=i,t.field=n.field}}return t}function o(t){if(e&&e.traceID&&e.traceID.getTraceID&&e.traceID.getTraceID(t),t){var r=t.errInfo,n=t;if(!r)for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];a&&(t[i]=decodeURIComponent(a))}r||(r={no:t.err_no,msg:t.err_msg||""},delete n.err_no,delete n.err_msg,t={data:n,errInfo:r})}return t}var s=function(){};t.prototype={get_isComplete:function(){return this._isComplete},get_value:function(){if(!this._isComplete)return void 0;if(this._exception)throw this._exception;return this._value},call:function(e){for(var t=[],r=0,n=arguments.length-1;n>r;r++)t[r]=arguments[r+1];return this.when(function(r){return r[e].apply(r,t)})},getValue:function(e){return this.when(function(t){return t[e]})},setValue:function(e,t){this.whenOnly(function(r){r[e]=t})},when:function(e,r,n){return t.when(this,e,r,n)},whenOnly:function(e,r,n){t.whenOnly(this,e,r,n)},success:function(e,t){return this.when(e,s,t)},fail:function(e,t){return this.when(s,e,t)},_enqueueOne:function(e){this._isComplete?this._notify(e):this._requests.push(e)},_notify:function(e){this._exception?e.breakPromise&&e.breakPromise(this._exception):e.fulfillPromise&&e.fulfillPromise(this._value)},_notifyAll:function(){for(var e=0,t=this._requests.length;t>e;e++)this._notify(this._requests[e])},_fulfillPromise:function(e){this._value=e,this._exception=null,this._isComplete=!0,this._notifyAll()},_breakPromise:function(e){this._value=null,this._exception=e||new Error("An error occured"),this._isComplete=!0,this._notifyAll()}},t.when=function(e,r,n,i){return new t(function(a,o){t.make(e)._enqueueOne({fulfillPromise:function(e){a(r?r.call(i,e):e)},breakPromise:function(e){if(n)try{a(n.call(i,e))}catch(t){o(t)}else o(e)}})})},t.whenOnly=function(e,r,n,i){t.make(e)._enqueueOne({fulfillPromise:function(e){r&&r.call(i,e)},breakPromise:function(e){n&&n.call(i,e)}})},t.make=function(e){return e instanceof t?e:t.immediate(e)},t.immediate=function(e){return new t(function(t){t(e)})};var c={};!function(e){var t=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");e.trim=function(e){return String(e).replace(t,"")},e.getUniqueId=function(e){return e+Math.floor(2147483648*Math.random()).toString(36)},e.g=function(e){return e?"string"==typeof e||e instanceof String?document.getElementById(e):!e.nodeName||1!=e.nodeType&&9!=e.nodeType?null:e:null},e.getParent=function(t){return t=e.g(t),t.parentElement||t.parentNode||null},e.encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e.array=e.array||{},e.array.indexOf=function(e,t,r){var n=e.length;for(r=0|r,0>r&&(r=Math.max(0,n+r));n>r;r++)if(r in e&&e[r]===t)return r;return-1},e.browser=e.browser||{},e.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,e.insertHTML=function(t,r,n){t=e.g(t);var i,a;return t.insertAdjacentHTML&&!e.browser.opera?t.insertAdjacentHTML(r,n):(i=t.ownerDocument.createRange(),r=r.toUpperCase(),"AFTERBEGIN"==r||"BEFOREEND"==r?(i.selectNodeContents(t),i.collapse("AFTERBEGIN"==r)):(a="BEFOREBEGIN"==r,i[a?"setStartBefore":"setEndAfter"](t),i.collapse(a)),i.insertNode(i.createContextualFragment(n))),t}}(c),e.base=c;var d={};!function(r){var n="__bdpp_pstc__"+(new Date).getTime(),i=n+"_form",a=n+"_ifr",o=function(e){if("object"==typeof e){var t=[];for(var r in e){var n=e[r];if(void 0!==n&&null!==n){t.length&&t.push("&");var i=encodeURIComponent("boolean"==typeof n?n?"1":"0":n.toString());t.push(encodeURIComponent(r),"=",i)}}return t.join("")}return"string"==typeof e?e:null},s=function(e,t){if(t=o(t),"string"==typeof t){var r=/\?/g.test(e);e+=(r?"&":"?")+o(t)}return e},d=function(e,t,r){e.setAttribute("type","text/javascript"),r&&e.setAttribute("charset",r),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)},u=function(e){if(e.clearAttributes)e.clearAttributes();else for(var t in e)e.hasOwnProperty(t)&&delete e[t];e&&e.parentNode&&e.parentNode.removeChild(e),e=null},l=function(e,t,r){function n(e){return function(){try{e?l.onfailure&&l.onfailure():(t.apply(window,arguments),clearTimeout(a)),window[i]=null,delete window[i]}catch(r){}finally{u(o)}}}var i,a,o=document.createElement("SCRIPT"),s="bd__cbs__",l=r||{},f=l.charset,p=l.queryField||"callback",g=l.timeOut||0,m=new RegExp("(\\?|&)"+p+"=([^&]*)");i=c.getUniqueId(s),window[i]=n(0),g&&(a=setTimeout(n(1),g)),e=e.replace(m,"$1"+p+"="+i),e.search(m)<0&&(e+=(e.indexOf("?")<0?"?":"&")+p+"="+i),d(o,e,f)},f=function(e,t){var r=[];r.push("<form id='",i,"' target='",a,"' "),r.push("action='",c.encodeHTML(e),"' method='post'>");for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(void 0!==o&&null!==o){var s=c.encodeHTML("boolean"==typeof o?o?"1":"0":o);r.push("<input type='hidden' name='",c.encodeHTML(n),"' value='",s,"' />")}}return r.push("</form>"),r.join("")},p=function(e,t,r,o){function s(e){return function(){try{e?o.onfailure&&o.onfailure():(r.apply(window,arguments),u&&clearTimeout(u)),window[l]=null,delete window[l]}catch(t){}}}o=o||{};var d=o.timeOut||0,u=!1,l=c.getUniqueId("bd__pcbs__");t[o.queryField||"callback"]="parent."+l;var p=f(e,t);if(c.g(i))c.getParent(i).innerHTML=p;else{var g=[];g.push("<div id='",n,"' style='display:none;'>"),g.push("<div>",p,"</div>"),g.push("<iframe name='",a,"' src='"+("https:"==(window.location?window.location.protocol.toLowerCase():document.location.protocol.toLowerCase())?"https://passport.baidu.com/passApi/html/_blank.html":"about:blank")+"' style='display:none;'></iframe>"),g.push("</div>"),c.insertHTML(document.body,"beforeEnd",g.join(""))}window[l]=s(),d&&(u=setTimeout(s(1),d)),c.g(i).submit()};r.jsonp=function(r,n,i){return i=i||{},e&&e.traceID&&e.traceID.createTraceID&&(n.traceid=e.traceID.createTraceID()),new t(function(e,t){r=s(r,n),l(r,function(t){i.processData&&(t=i.processData(t)),e&&e(t)},{charset:i.charset,queryField:i.queryField,timeOut:i.timeOut,onfailure:function(){t&&t()}})})},r.submit=function(r,n,i){return e&&e.traceID&&e.traceID.createTraceID&&(n.traceid=e.traceID.createTraceID()),r&&n?new t(function(e){p(r,n,function(t){i.processData&&(t=i.processData(t)),e&&e(t)},i)}):void 0};var g=[];r.load=function(e){return new t(function(t){var r=g.push(new Image)-1,n=!1,i=setTimeout(function(){n=!0,t&&t()},1e3);g[r].onload=function(){clearTimeout(i),n||t&&t(),n=!0,g[r]=g[r].onload=null},g[r].src=e})}}(d);var u="https://passport.baidu.com",l={getApiInfo:"/v2/api/?getapi",getLoginHistory:"/v2/api/?loginhistory",loginCheck:"/v2/api/?logincheck",getVerifyCodeStr:"/v2/?reggetcodestr",getRegSmsVerifyCodeStr:"/v2/?regsmscodestr",checkUserName:"/v2/?regnamesugg",checkPassword:"/v2/?regpwdcheck",checkMail:"/v2/?regmailcheck",isUserNoName:"/v2/api/?ucenteradduname",checkPhone:"/v2/?regphonecheck",getphonestatus:"/v2/?getphonestatus",sendPhoneCode:"/v2/?regphonesend",multiBind:"/v2/?multiaccountassociate",multiUnbind:"/v2/?multiaccountdisassociate",multiCheckUserName:"/v2/?multiaccountusername",multiGetaccounts:"/v2/?multiaccountget",multiSwitchuser:"/v2/?loginswitch",checkVerifycode:"/v2/?checkvcode",getRsaKey:"/v2/getpublickey",authwidGetverify:"/v2/sapi/authwidgetverify",checkIDcard:"/v3/finance/main/idnumcert",checkIDcardSecondStep:"/v3/finance/main/upcert",checkIDcardAllStep:"/v3/finance/main/idnumcert",checkIDcardState:"/v3/finance/main/checkupcert"},f={login:"/v2/api/?login",reg:"/v2/api/?reg",fillUserName:"/v2/api/?ucenteradduname",regPhone:"/v2/api/?regphone",checkIDcard:"/v3/finance/main/idnumcert",checkIDcardSecondStep:"/v3/finance/main/upcert",checkIDcardAllStep:"/v3/finance/main/idnumcert"},p={getApiInfo:{apiType:"class"},login:{memberPass:"mem_pass",safeFlag:"safeflg",isPhone:"isPhone",timeSpan:"ppui_logintime",logLoginType:"logLoginType"},fillUserName:{selectedSuggestName:"pass_fillinusername_suggestuserradio",timeSpan:"ppui_fillusernametime"},reg:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"},regPhone:{password:"loginpass",timeSpan:"ppui_regtime",suggestIndex:"suggestIndex",suggestType:"suggestType",selectedSuggestName:"pass_reg_suggestuserradio_0",logRegType:"logRegType"}},g={loginCheck:{isPhone:function(e){return e?"true":"false"}},login:{memberPass:function(e){return e?"on":""}}},m={checkPassword:{fromreg:1},reg:{registerType:1,verifypass:function(e){return e.password}}},h={password:!0},v={login:function(){}},y={checkUserName:"reg",checkMail:"reg",checkPhone:"regPhone",sendPhoneCode:"regPhone",multiCheckUserName:"multiBind",multiSwitchuser:"changeUser",checkVerifycode:"checkVerifycode"},I=passport.err.getCurrent().errMsg||passport.err.getCurrent(),b={};e.setContext=function(e){b.product=e.product||b.product,b.charset=e.charset||b.charset,b.staticPage=e.staticPage||b.staticPage,b.token=e.token||b.token,b.subpro=e.subpro||b.subpro},e.traceID={headID:e.traceID&&e.traceID.headID||"",flowID:e.traceID&&e.traceID.flowID||"",cases:e.traceID&&e.traceID.cases||"",initTraceID:function(e){var t=this;e&&e.length>0?(t.headID=e.slice(0,6),t.flowID=e.slice(6,8)):t.destory()},createTraceID:function(){var e=this;return e.headID+e.flowID+e.cases},startFlow:function(e){var t=this,r=t.getFlowID(e);0===t.flowID.length||t.flowID===r?(t.createHeadID(),t.flowID=r):t.finishFlow(r)},finishFlow:function(){var e=this;e.destory()},getRandom:function(){return parseInt(90*Math.random()+10,10)},createHeadID:function(){var e=this,t=(new Date).getTime()+e.getRandom().toString(),r=Number(t).toString(16),n=r.length,i=r.slice(n-6,n).toUpperCase();e.headID=i},getTraceID:function(e){var t=this,r=e&&e.traceid||"";t.initTraceID(r)},getFlowID:function(e){var t={login:"01",reg:"02"};return t[e]},setData:function(e){var t=this;return e.data?e.data.traceid=t.createTraceID():e.url=e.url+(e.url.indexOf("?")>-1?"&":"?")+"traceid="+t.createTraceID(),e},destory:function(){var e=this;e.headID="",e.flowID=""}};for(var D in l)l.hasOwnProperty(D)&&(e[D]=r(D,l[D]));for(var D in f)f.hasOwnProperty(D)&&(e[D]=r(D,f[D],!0));e.jsonp=function(e,t){return 0!=e.indexOf("http")&&(e=u+e),t=t||{},t.flag_code&&1==t.flag_code||(t.apiver="v3"),t.tt=(new Date).getTime(),d.jsonp(e,t,{charset:"utf-8",processData:function(e){return o(e)}})},e.post=function(e,t){return t=t||{},"wap"!==t.apitype&&(e=u+e),t.staticpage=t.staticpage||b.staticPage,t.charset=t.charset||b.charset||document.characterSet||document.charset||"",t.token=t.token||b.token,t.tpl=t.tpl||b.product,d.submit(e,t,{charset:"utf-8",processData:function(e){return o(e)}})},e.request=d}(passport.data),magic.passport=baidu.lang.createClass(function(){this._validateInfo={}},{type:"magic.passport",superClass:magic.Base}).extend({_getRegularField:function(e){var t=e.pwd?"password":"text",r=this,n='autocomplete="off"',i=e.maxLength?'maxlength="'+e.maxLength+'"':"",a=e.tip?e.tip:"",o=e.value?e.value:"",s=e.field+""=="verifycode"?"none":"",c="";c="text"===t?'<input type="text" style="display:none;">':'<input type="password" style="display: none;">';var d='<p id="'+r.$getId(e.field+"Wrapper")+'" class="pass-form-item pass-form-item-'+e.field+'" style="display:'+s+'">'+(e.label?'<label for="'+r.$getId(e.field)+'" id="'+r.$getId(e.field+"Label")+'" class="pass-label pass-label-'+e.field+'">'+e.label+"</label>":"")+c+'<input id="'+r.$getId(e.field)+'" type="'+t+'" name="'+e.field+'" class="pass-text-input pass-text-input-'+e.field+'" '+i+(e.placeholder?'placeholder="'+e.placeholder+'" ':"")+n+(e.disabled?'" disabled':"")+' value="'+o+'"/>'+(e.noError?"":'<span id="'+r.$getId(e.field+"Error")+'" class="pass-item-error pass-item-error-'+e.field+'"></span>')+(e.hasSucc?'<span id="'+r.$getId(e.field+"Succ")+'" class="pass-item-succ pass-item-succ-'+e.field+'" style="display:none;"></span>':"")+'<span id="'+r.$getId(e.field+"Tip")+'" class="pass-item-tip pass-item-tip-'+e.field+'" style="display:none"><span id="'+r.$getId(e.field+"TipText")+'" class="pass-item-tiptext pass-item-tiptext-'+e.field+'">'+a+"</span></span></p>";return d},_getHiddenField:function(e,t){var r,n=this,i='<p id="'+n.$getId(t||"hiddenFields")+'" style="display:none">';for(var a in e)e.hasOwnProperty(a)&&(r="string"==typeof e[a]?e[a].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#39;"):e[a],i+='<input type="hidden" id="'+n.$getId((t?t+"_":"")+a)+'" name="'+a+'" value="'+r+'" />');return i+="</p>"},_setEvent:function(){var e=this,t=this.getElement(),r=function(t){e._eventHandler.entrance.apply(e,[t])};baidu(e.getElement()).on("resize",function(){var e=(navigator.userAgent,!navigator.userAgent.match(/OS [1-8]_\d[_\d]* like Mac OS X/i)),t=!!navigator.userAgent.toString().match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r=navigator.userAgent.toString().indexOf("iPad");if(e&&t&&null!=r){var n=document.getElementsByClassName("popBox");null!=n&&n.length>0&&(n[0].style.height=window.screen.height>document.body.clientHeight?window.screen.height*(window.screen.height/document.body.clientHeight)+120+"px":window.screen.height*(window.screen.height/document.body.clientHeight))}}),baidu(e.getElement("form")).on("submit",r),baidu(e.getElement("license")).on("click",r),baidu(e.getElement("verifyCodeChange")).on("click",r),baidu(e.getElement("verifyCodeSend")).on("click",r),baidu(e.getElement("smsVcodeSend")).on("click",r),baidu(t).delegate(".pass-suggest-item label","click",r),baidu(".pass-text-input",e.getElement()).on({focus:r,blur:r,change:r,keyup:r,mouseover:r,mouseout:r})},_validator:{confStorage:{},builtInMsg:{required:"请您输入%s",phone:"手机号码格式不正确",email:"邮箱格式不正确",idcard:"身份证格式不正确"},builtInRules:{required:/\S+/,phone:/^1[3456789]\d{9}$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,idcard:/(^\d{15}$)|(^\d{17}(\d|X|x)$)/},init:function(e,t){this.confStorage[e.$getId()]=t},validate:function(e,t,r,n){var i=e.getElement(t),a={field:t},o=/^\s*(.+?)\s*$/;if(!i||0===+i.offsetHeight)return!1;for(var s=i.value.replace(o,"$1"),c=this.confStorage[e.$getId()][t],d=c.rules,u=0,l=d.length;l>u;u++){var f,p=d[u],g=this.builtInRules[p];if(f="[object function]"===Object.prototype.toString.call(g).toLowerCase()?g.call(e,i,n):new RegExp(g).test(s),!f)return a.error=!0,e._validateInfo[t]=0,a.msg=this.builtInMsg[p].replace(/\%s/,c.desc),e._validateError(a),void r.error(a)}c.asyncRule?c.asyncRule.call(e,{success:function(n){a.error=!1,a.data=n.data,e._validateInfo[t]=1,e._validateSuccess(a),r.success(a)},error:function(n){a.error=!0,e._validateInfo[t]=0,a.msg=n.msg,e._validateError(a),r.error(a)}},n):(a.error=!1,e._validateInfo[t]=1,e._validateSuccess(a),r.success(a))},validateAll:function(e,t,r){function n(){s=!0,o?t&&t.error(c):t&&t.success(c)}var i=this.confStorage[e.$getId()],a=0,o=!1,s=!1,c=[],d=this._getActiveValidate(e,!0);for(var u in i){if(s)break;this.validate(e,u,{success:function(e){a++,c.push(e),a===d&&n()},error:function(e){return o=!0,a++,c.push(e),r?void n():void(a===d&&n())}},"all")}},_getActiveValidate:function(e,t){var r=this.confStorage[e.$getId()],n=[];for(var i in r){var a=e.getElement(i);a&&0!==a.offsetHeight&&n.push(a)}return t?n.length:n},addRule:function(e,t){var r={};r[e]=t,baidu.extend(this.builtInRules,r)},addMsg:function(e,t){var r={};r[e]=t,baidu.extend(this.builtInMsg,r)}},validate:function(e,t){var r=this,n=r.fireEvent("beforeValidate",{validate:{field:e,ele:baidu(r.getElement(e))}});n&&r._validator.validate(r,e,{success:function(e){var n=r.fireEvent("validateSuccess",{validate:e});n&&t&&t.success&&t.success(e)},error:function(e){var n=r.fireEvent("validateError",{validate:e});n&&t&&t.error&&t.error(e)}})},validateAll:function(e,t){var r=this;t="boolean"==typeof e?e:t?t:!1;var n=r.fireEvent("beforeValidateAll");n&&r._validator.validateAll(r,{success:function(t){var n=r.fireEvent("validateAllSuccess",{validates:t});n&&e&&e.success&&e.success(t)},error:function(t){var n=r.fireEvent("validateAllError",{validates:t});n&&e&&e.error&&e.error(t)}},t)},getValidateStatus:function(e){return this._validateInfo.hasOwnProperty(e)?this._validateInfo[e]:-1},setValidateSuccess:function(e){var t=this;t._validateInfo[e]=1,t._validateSuccess({field:e})},setValidateError:function(e,t,r){var n=this;n._validateInfo[e]=0,n._validateError({field:e,msg:t},r)},setGeneralError:function(e){this.getElement("error").innerHTML=e},clearGeneralError:function(){this.getElement("error").innerHTML=""},_isSupportPlaceholder:function(){return"placeholder"in document.createElement("input")},_getPlaceholder:function(e){for(var t=this,r={},n="",i={},a=0;a<e.length;a++)n=t.lang[e[a].placeholder],0!==+e[a].clearbtn&&(i[a]=baidu('<span id="'+t.$getId(e[a].label+"_clearbtn")+'" class="pass-clearbtn pass-clearbtn-'+e[a].label+'" style="display:none;"></span>'http://passport.baidu.com/passApi/js/),baidu(t.getElement(e[a].label)).after(i[a])),t._isSupportPlaceholder()&&!baidu.browser.ie?baidu(t.getElement(e[a].label)).attr({placeholder:n}):(r[a]=baidu('<span id="'+t.$getId(e[a].label+"_placeholder")+'" class="pass-placeholder pass-placeholder-'+e[a].label+'">'+n+"</span>"),baidu(t.getElement(e[a].label)).after(r[a])),t._rendEventPlaceholder(t.getElement(e[a].label),r[a],i[a])},_getCookie:function(e){var t,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(r))?unescape(t[2]):null},_logPass:function(e,t){function r(e){var t,r,n,i,a,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=e.length,r=0,t="";n>r;){if(i=255&e.charCodeAt(r++),r===n){t+=s.charAt(i>>2),t+=s.charAt((3&i)<<4),t+="==";break}if(a=e.charCodeAt(r++),r===n){t+=s.charAt(i>>2),t+=s.charAt((3&i)<<4|(240&a)>>4),t+=s.charAt((15&a)<<2),t+="=";break}o=e.charCodeAt(r++),t+=s.charAt(i>>2),t+=s.charAt((3&i)<<4|(240&a)>>4),t+=s.charAt((15&a)<<2|(192&o)>>6),t+=s.charAt(63&o)}return t}var n=document.location.protocol+"//nsclick.baidu.com/v.gif?pid=111&v="+(new Date).getTime(),i="";for(var a in t)i=i+a+":"+t[a]+",";i=r("{"+i.substring(0,i.length-1)+"}");for(var o in e)e.hasOwnProperty(o)&&(n+="&"+o+"="+e[o]);if(n+="&source=pc",n+="&auto_statistic="+i+"&auto_en="+t.eventType){var s=new Image;s.onload=s.onerror=function(){s.onload=s.onerror=null,s=null},s.src=n}},logClickLink:function(e,t){e=e||{},e=this.formatLogData(e);var r=t.target||t.srcElement,n=r&&r.getAttribute&&r.getAttribute("target"),i="_self"===n||null===n,a=this.makeImgSrc(e);if(i&&(t.preventDefault?t.preventDefault():t.returnValue=!1),window.navigator.sendBeacon&&i)window.navigator.sendBeacon(a),window.location.href=r.getAttribute("href");else if(i)this.lazyLog(r,a,null);else{var o=new Image;o.onload=o.onerror=function(){o.onload=o.onerror=null,o=null},o.src=a}},logCallBack:function(e,t){e=e||{},e=this.formatLogData(e);var r=this.makeImgSrc(e);this.lazyLog({},r,t)},formatLogData:function(e){var t=this.config||{};return baidu.extend({},{page:e.logPage||"",source:"pc-api",tpl:t.product||"",subpro:t.subpro||"",extrajson:t.extrajson||"",data_source:"fe"},e)},makeImgSrc:function(e){var t=document.location.protocol+"//nsclick.baidu.com/v.gif?pid=111&type=1023&v="+(new Date).getTime(),r="";for(var n in e)e.hasOwnProperty(n)&&(r+="en"!==n?"&"+n+"="+e[n]:"&auto_en="+e[n]);var i="{eventType:"+(e.en||"")+"}";return i=this.base64encode(i),t+="&auto_statistic="+i,t+="&auto_en="+(e.en||""),t+=r},lazyLog:function(e,t,r){function n(){r?r():window.location.href=i}var i=e.getAttribute&&e.getAttribute("href"),a=new Image,o=setTimeout(function(){a.onload=a.onerror=a=null,n("imgTimeout")},200);a.onload=a.onerror=function(){clearTimeout(o),a.onload=a.onerror=a=null,n("imgSuccess")},a.src=t},base64encode:function(e){var t,r,n,i,a,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=e.length,r=0,t="";n>r;){if(i=255&e.charCodeAt(r++),r===n){t+=s.charAt(i>>2),t+=s.charAt((3&i)<<4),t+="==";break}if(a=e.charCodeAt(r++),r===n){t+=s.charAt(i>>2),t+=s.charAt((3&i)<<4|(240&a)>>4),t+=s.charAt((15&a)<<2),t+="=";break}o=e.charCodeAt(r++),t+=s.charAt(i>>2),t+=s.charAt((3&i)<<4|(240&a)>>4),t+=s.charAt((15&a)<<2|(192&o)>>6),t+=s.charAt(63&o)}return t},_rendEventPlaceholder:function(e,t,r){if(e||r){var n,i,a=this,o=function(e){1===+e?(t&&t[0]&&a.$hide(t[0]),r&&r[0]&&a.$show(r[0])):(t&&t[0]&&a.$show(t[0]),r&&r[0]&&a.$hide(r[0]))};setTimeout(function(){e&&e.value&&o(1)},200),baidu(t).on("mousedown",function(){i=!0,clearTimeout(n),n=setTimeout(function(){a.suggestionDom&&"none"!==a.suggestionDom.style.display||e.focus()},0)}),baidu(r).on("click",function(){e.value="",o(0),e.focus(),a.suggestionDom&&(a.suggestionDom.data_delete=!0,setTimeout(function(){a.suggestionDom.data_delete=!1},200))}),baidu(e).on("keyup",function(){o(e.value?1:0)}),baidu(e).on("focus",function(){window.inputCheckTimer=setInterval(function(){e.value.length?(o(1),clearInterval(window.inputCheckTimer)):o(0)},30)})}},SBCtoDBC:function(e){var t="";if(e){for(var r=e.length,n=0;r>n;n++){var i=e.charCodeAt(n);i=i>=65281&&65374>=i?i-65248:i,i=12288==i?32:i,t+=String.fromCharCode(i)}return t}},hide:function(){this.getElement().style.display="none"},show:function(){this.getElement().style.display="block"},_analysis:function(e,t){return window.passport.analysis&&window.passport.analysis[this.module]&&window.passport.analysis[this.module][e]?(window.passport.analysis[this.module][e](this,t),{preventDefault:!1,preventEvent:!1}):void 0},_hook:function(e,t){return window.passport.hook&&window.passport.hook[this.module]&&window.passport.hook[this.module][e]?window.passport.hook[this.module][e](this,t):{preventDefault:!1,preventEvent:!1}},fireEvent:function(e,t){var r=this._hook(e,t),n=!0;return r.preventEvent||(n=this.fire(e,t)),!r.preventDefault&&n},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?unescape(r[2]):""}}),magic.passport.IDCertifyQrcode=baidu.lang.createClass(function(e){var t=this;t._domain={https:"https://passport.baidu.com",http:"http://passport.baidu.com/",staticFile:"https:"===document.location.protocol.toLowerCase()?"https://ss0.bdstatic.com/5LMZfyabBhJ3otebn9fN2DJv":"http://passport.bdimg.com/",auto:"https:"===document.location.protocol.toLowerCase()?"https://passport.baidu.com":"http://passport.baidu.com/"},t.config={product:"",charset:"",token:"",hasPlaceholder:!0,staticPage:"",u:"",lang:"zh-CN",authsid:"",subpro:"ppcert"},baidu.extend(t.config,e),this.module="IDCertifyQrcode",t.constant={CHECKVERIFYCODE:!0,CONTAINER_CLASS:"tang-pass-IDCertifyQrcode",BLANK_IMG_URL:t._domain.auto+"/passApi/img/small_blank.gif"};var r=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0;6>=r&&(t.config.animation=!1),t.lang=passport.err.getCurrent().labelText.IDCertifyQrcode,t.config.defaultCss&&t.loadCssFileW("IDCertifyQrcode_3fd0e4a.css"/*tpa=http://passport.baidu.com/passApi/css/IDCertifyQrcode_3fd0e4a.css*/,function(){})},{type:"magic.passport.IDCertifyQrcode",superClass:magic.passport}).extend({_getIrregularField:function(e){var t=this,r=t.config.guideMsg||t.lang.IDCertifyQrcodeMsg,n={IDCertifyQrcodeLoading:'<div class="IDCertifyQrcode-status-con IDCertifyQrcode-status-loading" id="'+t.$getId("IDCertifyQrcodeLoading")+'"><img src="'+t._domain.auto+'/passApi/img/loading.gif" class="IDCertifyQrcode-loading-img"/></div>',IDCertifyQrcodeMain:'<div class="IDCertifyQrcode-status-con IDCertifyQrcode-stauts-main" id="'+t.$getId("IDCertifyQrcodeMain")+'"><img src="'+t.constant.BLANK_IMG_URL+'" id="'+t.$getId("IDCertifyQrcodeMainImg")+'" class="IDCertifyQrcode-main-img" />'+(t.config.animation?'<p class="IDCertifyQrcode-status-animation" id="'+t.$getId("IDCertifyQrcodeAnimation")+'"></p>':"")+"</div>",IDCertifyQrcodeSuccess:'<div class="IDCertifyQrcode-status-con IDCertifyQrcode-status-success" id="'+t.$getId("IDCertifyQrcodeSuccess")+'"><p class="IDCertifyQrcode-status-icon"></p><p>'+t.lang.IDCertifyQrcodeSuccessTit+'</p><p class="IDCertifyQrcode-status-msg">'+t.lang.IDCertifyQrcodeSuccessMsg+"</p></div>",IDCertifyQrcodeError:'<div class="IDCertifyQrcode-status-con IDCertifyQrcode-status-error" id="'+t.$getId("IDCertifyQrcodeError")+'"><p class="IDCertifyQrcode-status-icon"></p><p>'+t.lang.IDCertifyQrcodeErrorTit+'</p><p class="IDCertifyQrcode-status-msg">'+t.lang.IDCertifyQrcodeErrorMsg+"</p></div>",IDCertifyQrcodeRefresh:'<div class="IDCertifyQrcode-status-con IDCertifyQrcode-status-refresh" id="'+t.$getId("IDCertifyQrcodeRefresh")+'"><p class="IDCertifyQrcode-status-icon"></p><p>'+t.lang.IDCertifyQrcodeRefreshTit+'</p><p class="IDCertifyQrcode-refresh-btn" id="'+t.$getId("IDCertifyQrcodeRefreshBtn")+'">'+t.lang.IDCertifyQrcodeRefreshBtn+"</p></div>",IDCertifyQrcodeGuide:"<p>"+r+"</p>"};return n[e]},_getTemplate:function(){var e=this,t='<div class="IDCertifyQrcode-wrapper" id="'+e.$getId("IDCertifyQrcodeWrapper")+'">',r={u:e.config.u,staticPage:e.config.staticPage};return t+=e._getHiddenField(r),t+='<div class="IDCertifyQrcode-con">',t+=e._getIrregularField("IDCertifyQrcodeLoading"),t+=e._getIrregularField("IDCertifyQrcodeMain"),t+=e._getIrregularField("IDCertifyQrcodeSuccess"),t+=e._getIrregularField("IDCertifyQrcodeError"),t+=e._getIrregularField("IDCertifyQrcodeRefresh"),t+="</div>",e.config.hasGuideMsg&&(t+=e._getIrregularField("IDCertifyQrcodeGuide")),t+="</div>"},loadCssFileW:function(e,t){var r=this;if(window._loadedFilesW=window._loadedFilesW||{},!window._loadedFilesW[e]){window._loadedFilesW[e]=!0;var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=r._domain.staticFile+e,document.getElementsByTagName("head")[0].appendChild(n),n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,t&&t())}:n.onload=function(){t&&t()}}},insertScriptW:function(e,t){if(window._loadedFilesW=window._loadedFilesW||{},!window._loadedFilesW[e]){window._loadedFilesW[e]=!0;var r=document,n=r.createElement("SCRIPT");n.type="text/javascript",n.charset="UTF-8",n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,t&&t())}:n.onload=function(){t&&t()},n.src=e,r.getElementsByTagName("head")[0].appendChild(n)}},supportCss3Anim:function(){var e=document.getElementsByTagName("body")[0].style;return"undefined"!=typeof e.animation||"undefined"!=typeof e.WebkitAnimation?!0:!1
},getQrcode:function(){var e=this;passport.spareWData=passport.spareWData||{};var t={};t.lp="pc",t.apiver="v3",t.subpro=e.config.subpro,t.u=e.config.u,t.tpl=e.config.product||"pp",t.from="qrcert",t.hideQrcodeLiveState=e.config.hideQrcodeLiveState||"0",t.isGuide=e.getQueryString("isGuide")||0,baidu.ajax({url:e._domain.https+"/v3/ucenter/main/livingcertgetqrcode?v="+(new Date).getTime(),dataType:"jsonp",data:t,success:function(t){if(passport.spareWData.channelimg=t.imgurl,passport.spareWData.sign=t.sign,baidu(".IDCertifyQrcode-status-con",e.getElement("IDCertifyQrcodeWrapper")).hide(),!t.imgurl){var r=e.fireEvent("getQrcodeError");if(!r)return;return e.getElement("IDCertifyQrcodeMain").innerHTML=e.config.qrcodeErrorMsg||"请到手机百度进行高级实名操作",void e.$show(e.getElement("IDCertifyQrcodeMain"))}e.createChannel(passport.spareWData.sign),e.getElement("IDCertifyQrcodeMainImg").src=passport.spareWData.channelimg,e.config.animation&&(e.qrcodeAnimationShow(),setTimeout(function(){e.qrcodeAnimationHide()},300)),e.$show(e.getElement("IDCertifyQrcodeMain"));var n={page:"IDCertifyQrcode",source:"pc",tpl:e.config.product||""},i={eventType:"getQrcodeSuccess"};e._logPass(n,i);var r=e.fireEvent("getQrcodeSuccess")},error:function(){baidu(".IDCertifyQrcode-status-con",e.getElement("IDCertifyQrcodeWrapper")).hide(),e.$show(e.getElement("IDCertifyQrcodeError"))}})},createChannel:function(sign){var me=this,qrcodeSign=sign;passport.spareWData=passport.spareWData||{};var data={};data.channel_id=passport.spareWData.sign,data.tpl=me.config.product||"",data.subpro=me.config.subpro,baidu.ajax({url:me._domain.https+"/channel/unicast?v="+(new Date).getTime(),dataType:"jsonp",data:data,success:function(rsp){if(rsp.channel_v)try{rsp.channel_v=eval("("+rsp.channel_v+")")}catch(e){rsp.channel_v={}}else rsp.channel_v={};if("0"==rsp.errno&&"0"==rsp.channel_v.status){var returnValue=me.fireEvent("IDCertifyQrcodeSuccess",{callbackkey:rsp.channel_v.key||""});if(!returnValue)return;window.location.href=rsp.channel_v.u}else{if("0"==rsp.errno&&"1"==rsp.channel_v.status){var returnValue=me.fireEvent("qrcodeSuccess");if(!returnValue)return;baidu(".IDCertifyQrcode-status-con",me.getElement("IDCertifyQrcodeWrapper")).hide(),me.$show(me.getElement("IDCertifyQrcodeSuccess"))}if("0"==rsp.errno&&"3"==rsp.channel_v.status){var returnValue=me.fireEvent("productExamine");if(!returnValue)return}"0"==rsp.errno&&"2"==rsp.channel_v.status&&(baidu(".IDCertifyQrcode-status-con",me.getElement("IDCertifyQrcodeWrapper")).hide(),me.$show(me.getElement("IDCertifyQrcodeRefresh"))),qrcodeSign===passport.spareWData.sign&&me.createChannel(qrcodeSign)}},error:function(){baidu(".IDCertifyQrcode-status-con",me.getElement("IDCertifyQrcodeWrapper")).hide(),me.$show(me.getElement("IDCertifyQrcodeError"))}})},noticeWeb:function(){var e=this,t={};baidu.ajax({url:e._domain.https+"/channel/noticeWeb?v="+(new Date).getTime(),dataType:"jsonp",data:t,success:function(t){if(0==t.errInfo.no){baidu(".IDCertifyQrcode-status-con",e.getElement("IDCertifyQrcodeWrapper")).hide(),e.$show(e.getElement("IDCertifyQrcodeSuccess"));var r=e.fireEvent("IDCertifyQrcodeSuccess");if(!r)return;setTimeout(function(){window.location.href=t.data.u},1e3)}else baidu(".IDCertifyQrcode-status-con",e.getElement("IDCertifyQrcodeWrapper")).hide(),e.$show(e.getElement("IDCertifyQrcodeRefresh"))},error:function(){baidu(".IDCertifyQrcode-status-con",e.getElement("IDCertifyQrcodeWrapper")).hide(),e.$show(e.getElement("IDCertifyQrcodeError"))}})},qrcodeAnimationShow:function(){var e=this;e.supportCss3Anim()?baidu(e.getElement("IDCertifyQrcodeMain")).removeClass("IDCertifyQrcode-animationRight").addClass("IDCertifyQrcode-animation"):baidu(e.getElement("IDCertifyQrcodeMain")).css("margin-left","39px"),baidu(e.getElement("IDCertifyQrcodeAnimation")).addClass("IDCertifyQrcode-status-guideAnim")},qrcodeAnimationHide:function(){var e=this;baidu(e.getElement("IDCertifyQrcodeAnimation")).removeClass("IDCertifyQrcode-status-guideAnim"),e.supportCss3Anim()?baidu(e.getElement("IDCertifyQrcodeMain")).removeClass("IDCertifyQrcode-animation").addClass("IDCertifyQrcode-animationRight"):baidu(e.getElement("IDCertifyQrcodeMain")).css("margin-left","99px")},init:function(){var e=this;e.getQrcode(),baidu(e.getElement("IDCertifyQrcodeRefreshBtn")).on("click",function(){e.getQrcode()}),e.config.animation&&(baidu(e.getElement("IDCertifyQrcodeMain")).on("mouseenter",function(t){t&&t.preventDefault&&t.preventDefault();var r=e.fireEvent("fieldMouseenter",{ele:baidu(this)});r&&e.qrcodeAnimationShow()}),baidu(e.getElement("IDCertifyQrcodeMain")).on("mouseleave",function(t){t&&t.preventDefault&&t.preventDefault();var r=e.fireEvent("fieldMouseleave",{ele:baidu(this)});r&&e.qrcodeAnimationHide()}))},render:function(e){var t=this;t.getElement()||t.$mappingDom("",e||document.body);var r=baidu(t.getElement());r.addClass(t.constant.CONTAINER_CLASS);var n=t._getTemplate();r.get(0).appendChild(baidu(n).get(0));var i=t.fireEvent("renderFinish",{ele:this});i&&t.init()},$dispose:function(){var e=this;e.disposed||(baidu.dom(e.getElement()).removeClass(e.constant.CONTAINER_CLASS),e.getElement().removeChild(e.getElement("form")),magic.Base.prototype.$dispose.call(e))}}),magic});